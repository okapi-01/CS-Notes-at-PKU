# ç¨‹åºè®¾è®¡å®ä¹ 



---

## lecture 1

### å¼•ç”¨

æŸä¸ªå˜é‡çš„**å¼•ç”¨**ç­‰ä»·äºè¿™ä¸ªå˜é‡ï¼Œç›¸å½“äºè¯¥å˜é‡çš„ä¸€ä¸ª**åˆ«å**ã€‚

åˆå§‹åŒ–åï¼Œå®ƒå°±ä¸€ç›´å¼•ç”¨è¯¥å˜é‡ï¼Œä¸ä¼šå†å¼•ç”¨åˆ«çš„å˜é‡äº†ã€‚

```c++
int n = 0;
int & r = n;
r = 4;
cout << r; //è¾“å‡º 4
cout << n; //è¾“å‡º 4
n = 5;
cout << r; //è¾“å‡º 5
```

```c++
//swap å¯ä»¥ç”¨å¼•ç”¨å®ç°
void swap(int a, int b){
	int tmp;
	tmp = a; a = b; b = tmp;
}
swap(n1,n2);
```

```c++
//å¼•ç”¨ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼
int n = 4;
int & SetValue() {
	return n; 
}
int main(){
	SetValue() = 40;
	cout << n; //è¾“å‡º40
	return 0;
}
```

`const int &` ä¸å¯ä»¥é€šè¿‡å¼•ç”¨ä¿®æ”¹å˜é‡å€¼ï¼Œæœªå¼ºåˆ¶è½¬æ¢çš„`const int &`ä¹Ÿä¸èƒ½åˆå§‹åŒ–å¦ä¸€ä¸ªå¼•ç”¨

```c++
int n = 100;
const int & r = n;
r = 200; //ç¼–è¯‘é”™
n = 300; //å¯¹
int & r2 = r; //ç¼–è¯‘é”™
int & r2 = (int &) r; //å¯¹
```



###  const çš„ç”¨æ³•

`const`æŒ‡é’ˆä¸å¯ä¿®æ”¹åœ°å€ä¸Šçš„å€¼ï¼Œä½†å¯ä¿®æ”¹æŒ‡å‘çš„åœ°å€ã€‚

```c++
int n,m;
const int * p = & n;
* p = 5; //ç¼–è¯‘å‡ºé”™
n = 4; //å¯¹
p = &m; //å¯¹
```



### åŠ¨æ€å†…å­˜åˆ†é…

`new int`è¿”å›ä¸€å—æ–°çš„åœ°å€

```c++
int* p
p = new int;
*p = 5;
delete p; //åªèƒ½deleteä¸€æ¬¡

int* pn
int i = 5;
pn = new int[i*20];
delete [] pn;
```

å¦‚æœæ˜¯`new CRectangle`ï¼Œä¸deleteå°±ä¸ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Œå†…å­˜æ³„æ¼ã€‚



### å†…è”å‡½æ•°

åœ¨å‡½æ•°å‰åŠ  `inline`å³å¯è®©ç¼–è¯‘å™¨å¸®ä½ å¡å…¥ç¨‹åºï¼Œå‡å°‘è°ƒç”¨æˆæœ¬ã€‚

```c++
inline int max(int a, int b) {return a > b ? a : b;}
```



### å‡½æ•°é‡è½½

å‚æ•°ä¸ªæ•°æˆ–ç±»å‹ä¸åŒå³å¯å®šä¹‰åå­—ç›¸åŒçš„å¤šä¸ªå‡½æ•°ã€‚



### ç¼ºçœå‚æ•°

å¯ä»¥è®©å‡½æ•°**æœ€å³è¾¹è¿ç»­**è‹¥å¹²ä¸ªå‚æ•°æœ‰ç¼ºçœå€¼ï¼Œåˆ™è°ƒç”¨å‡½æ•°æ—¶è‹¥ä¸å†™å‚æ•°ï¼Œåˆ™é»˜è®¤ç¼ºçœã€‚

```c++
void func (int x1, int x2 = 2 , int x3 = 3){}
func(10); //ç­‰æ•ˆäºfunc(10, 2, 3);
func(10,8); //ç­‰æ•ˆäº func(10, 8, 3);
func(10, , 8); //ä¸è¡Œï¼Œåªèƒ½æœ€å³è¾¹çš„è¿ç»­è‹¥å¹²ä¸ªå‚æ•°ç¼ºçœ
```



### ç±»

ç±»ï¼š{æˆå‘˜å˜é‡ã€æˆå‘˜å‡½æ•°}

å¯¹è±¡ï¼šç±»çš„å®ä¾‹ã€‚eg. CRectangle **R **

`sizeof(CRectangle)` = æ‰€æœ‰æˆå‘˜å˜é‡çš„å¤§å°ä¹‹å’Œ (æ¯”å¦‚ä¸¤ä¸ªintå°±æ˜¯8)

è°ƒç”¨æˆå‘˜å¯ä»¥ä½¿ç”¨`.`æˆ–`->`

```c++
class CRectangle{
    int w, h;
    void Init(int w_, int h_){
		w = w_; h = h_
	}
    void Area();
};
```

åœ¨æˆå‘˜å¤–éƒ¨å¯ä»¥è¯¦ç»†å®šä¹‰æˆå‘˜å‡½æ•°ã€‚

```c++
void CRectangle::Area() {return w*h;}
```

`private:` ç§æœ‰æˆå‘˜ï¼ˆç¼ºçœçŠ¶æ€ï¼‰ï¼Œåªèƒ½åœ¨æˆå‘˜å‡½æ•°å†…è®¿é—®ï¼ˆå¯ä»¥è®¿é—®æ‰€æœ‰å¯¹è±¡çš„å…¨éƒ¨æˆå‘˜ï¼‰ã€‚

`public:`å…¬æœ‰æˆå‘˜ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è®¿é—®ã€‚

`protected:`ä¿æŠ¤æˆå‘˜ï¼Œåªèƒ½è¢«æ´¾ç”Ÿç±»æˆå‘˜æˆ–å‹å…ƒè®¿é—®ã€‚

```c++
//ç”¨structæ¥å®šä¹‰ç±»çš„è¯ï¼Œå”¯ä¸€åŒºåˆ«æ˜¯ç¼ºçœçŠ¶æ€æ˜¯å…¬æœ‰æˆå‘˜ã€‚
struct CEmployee{
    char szName[30]; //å…¬æœ‰!!
public:
	int salary;
    void setName(char *name);
    void getName(char *name);
    void averageSalary(CEmployee e1,CEmployee e2);
};
```



---

## lecture 2

### æ„é€ å‡½æ•°

åå­—ä¸ç±»åç›¸åŒï¼Œå¯ä»¥æœ‰å‚æ•°ï¼Œä¸èƒ½æœ‰è¿”å›å€¼ï¼ˆvoidä¹Ÿä¸è¡Œï¼‰

ä½œç”¨ï¼šä¸ºå¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ï¼ˆä¸å¿…æ‹…å¿ƒå¿˜è®°è°ƒç”¨åˆå§‹åŒ–å‡½æ•°ï¼‰

```c++
class Complex{
    private:
    	double real, imag;
    public: //æ„é€ å‡½æ•°æ”¾åœ¨publicé‡Œï¼Œä¸ç„¶æ— æ³•è°ƒç”¨
    	Complex(double r, double i=0); //å¯ä»¥é‡è½½
};

Complex::Complex(double r, double i=0){
    real = r; imag = i;
}
//æˆ–è€…åˆ—è¡¨å½¢å¼
Complex::Complex(double r, double i = 0) : real(r), imag(i) {}
```



### å¤åˆ¶æ„é€ å‡½æ•°

åªæœ‰ä¸€ä¸ªå‚æ•°ï¼ˆå¯¹åŒç±»å¯¹è±¡çš„å¼•ç”¨ï¼‰

```c++
Complex::Complex(Complex & c){
	real = c.real;
    imag = c.imag;
}
Complex c2(c1);
```

è°ƒç”¨åœºæ™¯ï¼š

1. ç”¨ä¸€ä¸ªå¯¹è±¡å»åˆå§‹åŒ–åŒç±»çš„å¦ä¸€ä¸ªå¯¹è±¡æ—¶ï¼ˆ`éåˆå§‹åŒ–æ—¶ç”¨ç­‰å·èµ‹å€¼å¹¶ä¸è°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°`ï¼‰
2. å‚æ•°å¤åˆ¶æ„é€ åä¼ è¿›å‡½æ•°ï¼ˆ`æ‰€ä»¥åœ¨ä¼ å‚æ—¶ä½¿ç”¨å¼•ç”¨å¯ä»¥é™ä½å¼€é”€`ï¼‰
3. å‡½æ•°è¿”å›å€¼ä¼šè¢«å¤åˆ¶æ„é€ ä¸ºä¸´æ—¶å¯¹è±¡ï¼ˆ`æœ‰äº›ç¼–è¯‘å™¨å¯èƒ½ä¼šä¼˜åŒ–æ‰`ï¼‰



### ç±»å‹è½¬æ¢æ„é€ å‡½æ•°

åœ¨éœ€è¦è½¬æ¢ç±»å‹æ—¶å»ºç«‹ä¸€ä¸ªä¸´æ—¶å¯¹è±¡

```c++
Complex::Complex(int i){
	real = i; imag = 0;
}
c1 = 9; //9è¢«è‡ªåŠ¨è½¬æ¢ä¸ºä¸€ä¸ªä¸´æ—¶Complexå¯¹è±¡
```

```c++
//ä½¿ç”¨explicitå…³é”®å­—æ¥é˜²æ­¢éšå¼è‡ªåŠ¨è½¬æ¢
explicit Complex(int i) {...}

c1 = 9; //error
c1 = Complex(9); //ok
```



### ææ„å‡½æ•°

åœ¨å¯¹è±¡æ¶ˆäº¡åè°ƒç”¨ï¼ˆåœ¨å¯¹è±¡ä½œä¸ºå‡½æ•°è¿”å›å€¼è¿”å›åä¹Ÿä¼šè¢«è°ƒç”¨ï¼‰

```c++
String::~String(){
	delete [] p;
}
```



### this æŒ‡é’ˆ

```c++
Complex AddOne () {
	this->real++;
	return * this;
}
```



### é™æ€æˆå‘˜ `static`

ä¸€å…±åªæœ‰ä¸€ä»½ï¼Œæ‰€æœ‰å¯¹è±¡å…±äº«ã€‚

éœ€è¦åœ¨ç±»å¤–è¿›è¡Œåˆå§‹åŒ–ã€‚

```c++
class CRectangle{
    private:
    	static int nTotalNumber;
    public:
    	static void PrintTotal();
}
int CRectangle::nTotalNumber = 0;
void PrintTotal() {cout << nTotalNumber << endl;}
```

é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡ã€‚ï¼ˆä¸èƒ½æœ‰`this`æŒ‡é’ˆï¼‰

å¯ä»¥é€šè¿‡`CRectangle::PrintTotal()`æ¥è®¿é—®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡`r.PrintTotal()`æˆ–`r->PrintTotal()`

`sizeof` ä¸ä¼šè®¡ç®—é™æ€æˆå‘˜å˜é‡



### æˆå‘˜å¯¹è±¡å’Œå°é—­ç±»

æœ‰æˆå‘˜å¯¹è±¡çš„ç±»å«å°é—­ç±»ï¼ˆenclosingï¼‰

```c++
class CTyre {
	int radius;
    int width;
public:
	CTyre(int r, int w): radius(r),width(w){ }
}
class CEngine {}
class CCar { //CCar is an enclosing class
    int price;
    CTyre tyre;
    CEngine engine;
public:
    CCar(int p, int tr, int tw);
};
CCar::CCar( int p, int tr, int tw ): price(p), tyre(tr, tw) {};
//å°é—­ç±»ä¸å¯ä»¥ä¸å®šä¹‰æ„é€ å‡½æ•°ï¼Œä¸ç„¶å¯¹è±¡ä¸­çš„(æ²¡æœ‰æ— å‚æ„é€ å‡½æ•°çš„)æˆå‘˜å¯¹è±¡ä¸çŸ¥é“è¯¥å¦‚ä½•åˆå§‹åŒ–ã€‚
int main(){
    CCar car(20000, 17, 225);
    return 0;
}
```

æ„é€ é¡ºåºï¼šå…ˆæ„é€ å¯¹è±¡æˆå‘˜ï¼Œå†æ„é€ å°é—­ç±»ã€‚å¯¹è±¡æˆå‘˜æŒ‰ç…§ç±»ä¸­å£°æ˜é¡ºåºè¿›è¡Œæ„é€ ï¼Œä¸æ„é€ åˆ—è¡¨æ— å…³ã€‚

å…ˆæ„é€ çš„åææ„ã€‚

å°é—­ç±»çš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯ç”¨é»˜è®¤å¤åˆ¶æ„é€ å‡½æ•°åˆå§‹åŒ–ï¼Œå®ƒé‡Œé¢åŒ…å«çš„æˆå‘˜å¯¹è±¡ä¹Ÿä¼šç”¨å¤åˆ¶æ„é€ å‡½æ•°åˆå§‹åŒ–ã€‚

```C++
class A{
    public:
    A() { cout << "default" << endl; }
    A(A & a) { cout << "copy" << endl;}
class B { A a;};
int main(){
	B bl, b2(b1);
    return 0;
}
//default
//copy
```



### å‹å…ƒ

#### å‹å…ƒå‡½æ•°

```c++
class CCar{
private:
	int price;
    friend int MostExpensiveCar(CCar cars[], int total); //è®¤ä¸ºå…¨å±€å‡½æ•°æ˜¯friend
    friend void CDriver::ModifyCar(CCar * pCar); //è®¤ä¸ºæˆå‘˜å‡½æ•°æ˜¯friend
}
```

#### å‹å…ƒç±»

æœ‹å‹å¯ä»¥è®¿é—®æˆ‘çš„ç§æœ‰æˆå‘˜ã€‚

```c++
class CCar{
private:
	int price;
	friend class CDriver;
};
```

å‹å…ƒå…³ç³»ä¸æ˜¯ç›¸äº’çš„ï¼Œä¸èƒ½ä¼ é€’ä¹Ÿä¸èƒ½ç»§æ‰¿ã€‚



### å¸¸é‡æˆå‘˜å‡½æ•°

å¸¸é‡å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸é‡æˆå‘˜å‡½æ•°ï¼ˆæ¥ä¿è¯ä¸è¢«ä¿®æ”¹ï¼‰

å¸¸é‡æˆå‘˜å‡½æ•°ä¸èƒ½æ”¹å˜éé™æ€å±æ€§çš„å€¼ï¼Œä¹Ÿä¸èƒ½è°ƒç”¨éå¸¸é‡æˆå‘˜å‡½æ•°ï¼ˆé™æ€æˆå‘˜å‡½æ•°å¯ä»¥ï¼‰ã€‚

```c++
void Complex::func(){}
void Complex::GetValue() const{
    real = 0; //wrong
    func(); //wrong. correct if func is a const func.
}
const Complex c0;
c0.GetValue(); //ok
c0.func(); //wrong. correct if func is a const func.
```

*å¥½çš„ç é£ï¼šå¤šæ ‡`const`ï¼*

##### å¸¸é‡æˆå‘˜å‡½æ•°çš„é‡è½½

```c++
int GetValue() const { return real;}
int GetValue() {return 2*real;}

const Complex c1 = 1;
Complex c2 = 1;
cout << c1.GetValue() << c2.Getvalue(); //1 2
```

##### mutable å¯¹è±¡

å¯ä»¥åœ¨ const æˆå‘˜å‡½æ•°ä¸­ä¿®æ”¹ã€‚

```c++
class Complex{
    public:
    	void func() const {imag = 0;}
    private:
    	int real;
    	mutable int imag;
};
```



---

## lecture 3. è¿ç®—ç¬¦é‡è½½

ç›®çš„ï¼šè®©è¿ç®—ç¬¦ä½œç”¨äºå¯¹è±¡ã€‚

å¯ä»¥é‡è½½ä¸ºæ™®é€šå‡½æ•°ï¼Œä¹Ÿå¯ä»¥é‡è½½ä¸ºæˆå‘˜å‡½æ•°ã€‚

```c++
Class Complex{
public:
    double real, imag;
    Complex operator- (const Complex &c);
};

Complex operator+ (const Complex &a, const Complex &b){ //é‡è½½ä¸ºæ™®é€šå‡½æ•°
    return Complex(a.real+b.real, a.imag+b.imag);
}

Complex Complex::operator- (const Complex &c){ //é‡è½½ä¸ºæˆå‘˜å‡½æ•°
    return Complex(real-c.real, imag-c.imag);
}

int main(){
    Complex a(4,4), b(1,1), c;
    c = a+b; //c = operator+(a,b);
    cout << c.real << " " << c.imag << endl;
    cout << (a-b).real << " " << (a-b).imag << endl; //(a-b) == a.operator-(b);
    return 0;
}
//è¾“å‡º 5 5 3 3
```

### é‡è½½èµ‹å€¼è¿ç®—ç¬¦

èµ‹å€¼è¿ç®—ç¬¦`=`åªèƒ½é‡è½½ä¸ºæˆå‘˜å‡½æ•°ã€‚

```c++
String & String::operator= (const char *s){
	delete [] str;
	str = new char[strlen(s)+1];
	strcpy(str, s);
	return *this;
} //c++é»˜è®¤â€œa=bâ€è¿”å›açš„å¼•ç”¨ï¼Œæ‰€ä»¥å°½é‡å’ŒåŸæ¥ä¿æŒä¸€è‡´ã€‚

String s;
s = "Good Luck"; //s.operator=("Good Luck");
```

#### æµ…æ‹·è´ï¼ˆåªæ‹·è´äº†æŒ‡é’ˆï¼‰

å¦‚æœä¸å®šä¹‰èµ‹å€¼ï¼Œåˆ™`s1 = s2`å®åˆ™å¯¼è‡´s1æŒ‡å‘s2çš„åœ°å€ã€‚

#### æ·±æ‹·è´ï¼ˆæ‹·è´å†…å®¹ï¼‰

```c++
String & operator = (const String & s){
    delete[]str;
    str = new char[ strlen( s.str )+1];
    strcpy(str, s.str);
    return *this;
}
```

ä½†å¦‚æœå†™`s = s`åˆ™ä¼šå‡ºé”™ã€‚æ‰€ä»¥å¯ä»¥åœ¨å¼€å¤´åŠ ä¸€æ¡åˆ¤æ–­`if( this == &s ) return this;`

> [!TIP]
>
> å¦‚æœæˆå‘˜å˜é‡ä¸­æœ‰æŒ‡é’ˆï¼Œå°±å¤§æ¦‚ç‡è¦è€ƒè™‘å†™æ·±æ‹·è´èµ‹å€¼ï¼Œè¿˜è¦é‡è½½å¤åˆ¶æ„é€ å‡½æ•°ã€‚

### è¿ç®—ç¬¦é‡è½½ä¸ºå‹å…ƒå‡½æ•°

å½“é‡è½½ä¸ºæˆå‘˜å‡½æ•°/æ™®é€šå‡½æ•°éƒ½ä¸æ–¹ä¾¿æ—¶ï¼Œå¯ä»¥å‹å…ƒã€‚

### é‡è½½æµæ’å…¥è¿ç®—ç¬¦

cout æ˜¯åœ¨ iostream ä¸­å®šä¹‰çš„ ostream ç±»å¯¹è±¡ï¼Œ"<<" èƒ½ç”¨åœ¨ cout ä¸Šæ˜¯å› ä¸º iostream å¯¹å®ƒè¿›è¡Œäº†é‡è½½ã€‚cinåˆ™æ˜¯istreamç±»çš„å¯¹è±¡ã€‚

so if we are to reload it:

```c++
ostream & ostream::operator<<(ostream &os, const CStudent &s){ //å…¨å±€å‡½æ•°
    os << s.id;
    return os;
}
//or reload inside class
friend istream &istream::operator>>(istream &is, const Complex &c){
	//...
    return is;
}
```

### é‡è½½è‡ªå¢/è‡ªå‡è¿ç®—ç¬¦

è§„å®š ++x åªéœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œx++ è¦å¤šä¼ ä¸€ä¸ªæ²¡ç”¨çš„å‚æ•°ã€‚

```c++
CDemo& operator++(){ //å®ç° ++demo
    n++;
    return *this;
}
CDemo& operator++(int k){ //å®ç° demo++
    CDemo tmp(*this);
    n++;
    return tmp;
}
```



---

## lecture 4. ç»§æ‰¿ä¸æ´¾ç”Ÿ

### ç»§æ‰¿

è‹¥ç±»Bæ‹¥æœ‰ç±»Açš„æ‰€æœ‰ç‰¹ç‚¹ï¼Œåˆ™å¯ä»¥æŠŠAä½œä¸ºä¸€ä¸ªåŸºç±»ï¼Œè€ŒæŠŠBä½œä¸ºè¯¥åŸºç±»çš„æ´¾ç”Ÿç±»(å­ç±»)ã€‚ä¸€ä¸ªBå¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªAå¯¹è±¡ã€‚

æ´¾ç”Ÿç±»æ‹¥æœ‰åŸºç±»å…¨éƒ¨æˆå‘˜ï¼Œä½†æ— æ³•è®¿é—®åŸºç±»çš„privateæˆå‘˜ï¼Œæ´¾ç”Ÿç±»æˆå‘˜å‡½æ•°å’Œå‹å…ƒå‡½æ•°å¯ä»¥è®¿é—®åŸºç±»å„å¯¹è±¡çš„protectedæˆå‘˜ã€‚

```c++
class CUndergraduateStudent: public CStudent{ //just use "public"
    string department;
    void PrintInfo(){ //able to cover the functions of CStudent.
        CStudent::PrintInfo(); //reuse
        cout << "Department: " << department << endl;
	}
};
```

å°½é‡ä¸è¦è®©åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­æœ‰åŒåæˆå‘˜å˜é‡ã€‚ä¸ç„¶æœ‰ç‚¹è«åå…¶å¦™ï¼Œæ´¾ç”Ÿå¯¹è±¡ä¸­ä¼šå­˜å‚¨ name å’Œ CStudent::nameã€‚

#### ---æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°

æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ä¸èƒ½ç›´æ¥åˆå§‹åŒ–åŸºç±» private å¯¹è±¡ï¼Œè¦ç”¨åˆ—è¡¨åˆå§‹åŒ–åŸºç±»ã€‚

```c++
//suppose nLegs is a private variant of Bug.
Bug::Bug(int legs): nLegs(legs){}
Flybug::Flybug(int legs, int wings){
    nLegs = legs; //wrong
    nWings = wings;
}
Flybug::Flybug(int legs, int wings): Bug(legs), nWings(wings) {} //correct
```

å…ˆæ‰§è¡ŒåŸºç±»æ„é€ å‡½æ•°å†æ‰§è¡Œè‡ªå·±æ„é€ å‡½æ•°ï¼ˆä»¥åŠå¯èƒ½æœ‰çš„å°é—­æˆå‘˜å¯¹è±¡ï¼‰ã€‚

æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°æ‰§è¡Œå®Œåè‡ªåŠ¨æ‰§è¡ŒåŸºç±»çš„ææ„å‡½æ•°ã€‚

#### ---èµ‹å€¼å…¼å®¹è§„åˆ™

åœ¨ public ç»§æ‰¿ä¸­ï¼šï¼ˆè‹¥ä¸º private ç»§æ‰¿æˆ– protected ç»§æ‰¿åˆ™ä¸è¡Œï¼‰

å¯ä»¥`Bug b = flybuga;` å°†æ´¾ç”Ÿç±»èµ‹å€¼ç»™åŸºç±»ã€‚

<img src="./../typora-images\image-20250307215220713.png" alt="image-20250307215220713" style="zoom:30%;" />

å¯ä»¥é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢ä½¿åŸºç±»æŒ‡é’ˆ(/å¼•ç”¨)æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œå¯ä»¥è®¿é—®åŸºç±»æˆå‘˜ï¼Œä½†ä¸å¯ä»¥è®¿é—®æ´¾ç”Ÿç±»æˆå‘˜ã€‚

ä¹Ÿå¯ä»¥å¼ºåˆ¶ä½¿æ´¾ç”Ÿç±»æŒ‡é’ˆ(/å¼•ç”¨)æŒ‡å‘åŸºç±»å¯¹è±¡ï¼Œä½†è‹¥è®¿é—®æ´¾ç”Ÿç±»è‡ªå·±çš„æˆå‘˜åˆ™å¯èƒ½å¼•å‘æœªçŸ¥é”™è¯¯ï¼ˆç¼–è¯‘å¯ä»¥é€šè¿‡ï¼Œä½†å®é™…åœ¨æ“ä½œåˆ«çš„å˜é‡ï¼‰ã€‚

#### ---ç›´æ¥åŸºç±»ä¸é—´æ¥åŸºç±»

é—´æ¥åŸºç±»ï¼šçˆ·çˆ·ã€‚

å£°æ˜æ—¶åªéœ€è¦åˆ—å‡ºç›´æ¥åŸºç±»ã€‚



### å¤åˆå…³ç³»ï¼ˆå°é—­ç±»ï¼‰

åŒºåˆ«ï¼šå°é—­ç±»ä¸ºä¸€ä¸ªç»„æˆéƒ¨åˆ†ã€‚ä¸€ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡åˆ™ä¹Ÿæ˜¯ä¸€ä¸ªåŸºç±»å¯¹è±¡ã€‚

ä½†ä¸èƒ½å¾ªç¯å®šä¹‰ï¼Œç‹—ä¸­æœ‰äººï¼Œäººä¸­æœ‰ç‹—ã€‚

```c++
class CMaster;
class CDog{
    CMaster master;
};
class CMaster{
    CDog dog[10];
};
```

è‹¥ä¸»äººä¸­æœ‰æŒ‡é’ˆæŒ‡å‘ç‹—ï¼Œåˆ™ä¸€ä¸ªäººæœ‰ä¸€ä¸ªç‹¬ç«‹ä¸»äººå¯¹è±¡å’Œå¤šä¸ªç‹—ä¸­çš„ä¸»äººå¯¹è±¡ï¼Œéœ€è¦ç»´æŠ¤ä¸€è‡´æ€§ã€‚

```c++
class CMaster;
class CDog{
    CMaster master;
};
class CMaster{
    CDog *dog[10];
};
```

è‹¥ç‹—ä¸­æœ‰æŒ‡é’ˆæŒ‡å‘ä¸»äººï¼Œåˆ™ç‹—å¯¹è±¡è¢«å›°åœ¨äººä¸­ï¼Œä¸æ–¹ä¾¿äº¤æ˜“ã€‚

```c++
class CMaster;
class CDog{
    CMaster *master;
};
class CMaster{
    CDog dog[10];
};
```

å¥½çš„æ–¹æ³•ï¼šå…¨å˜æˆæŒ‡é’ˆã€‚å¯¹è±¡å•ç‹¬ä¸ºå¯¹è±¡ï¼Œä½†äº’ç›¸é€šè¿‡æŒ‡é’ˆè¿æ¥ã€‚

```c++
class CMaster;
class CDog{
    CMaster *master;
};
class CMaster{
    CDog *dog[10];
};
```



---

## lecture 5. è™šå‡½æ•°ä¸å¤šæ€

### å¤šæ€

**è™šå‡½æ•°**ï¼šå‰åŠ å…³é”®å­—`virtual`ã€‚

é€šè¿‡**åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨**è°ƒç”¨åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­çš„åŒååŒå‚**è™šå‡½æ•°**æ—¶
(1) è‹¥æŒ‡å‘ä¸€ä¸ªåŸºç±»çš„å¯¹è±¡ï¼Œé‚£ä¹ˆè¢«è°ƒç”¨æ˜¯åŸºç±»çš„è™šå‡½æ•°
(2) è‹¥æŒ‡å‘ä¸€ä¸ªæ´¾ç”Ÿç±»çš„å¯¹è±¡ï¼Œé‚£ä¹ˆè¢«è°ƒç”¨çš„æ˜¯æ´¾ç”Ÿç±»çš„è™šå‡½æ•° ã€‚
è¿™ç§è°ƒç”¨å«**å¤šæ€**ã€‚
`è‹¥ä¸æ˜¯è™šå‡½æ•°ï¼Œåˆ™è°ƒç”¨åŸºç±»çš„å‡½æ•°`

ä½œç”¨ï¼šç®€æ´ï¼Œå¯æ‰©å……æ€§ï¼ˆè¦ä¿®æ”¹/æ‰©å……æ—¶æ”¹çš„ä¸œè¥¿å°‘ï¼‰ã€‚

`åŸºç±»ä¸­å†™äº†virtualçš„ï¼Œæ´¾ç”Ÿç±»ä¸­è‡ªåŠ¨æˆä¸ºvirtualå‡½æ•°`

**åœ¨æ„é€ /ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°ä¸èƒ½ç®—å¤šæ€**

#### ä¾‹å­

éå¤šæ€

```c++
class CDragon: public CCreature{
public:
	void Attack(CWolf pWolf) {
		pWolf->Hurted(nPower);
		pWolf->FightBack(this);
	}
    void Attack(CGhost pGhost) {
		pGhost->Hurted(nPower);
		pGhost->FightBack(this);
	}
    //......
}
```

å¤šæ€

```c++
class CCreature{
protected: 
    int m_nifeValue, m_nPower.public:
	virtual void Attack(CCreature *pCreature) {}
    virtual void Hurted(int nPower){}
    virtual void FightBack(CCreature *pCreature){}
}
class CDragon : public CCreature{
public:
	virtual void Attack(CCreature *pCreature){
		pCreature->Hurted(m_nPower);
		pCreature->FightBack(this);
    } //one function is enough. very convenient.
    virtual void Hurted(int nPower);
    virtual void FightBack(CCreature *pCreature);
}
```



### å¤šæ€çš„å®ç°
`ä¹Ÿå«åŠ¨æ€è”ç¼–`

æ¯ä¸€ä¸ªæœ‰è™šå‡½æ•°çš„ç±»éƒ½æœ‰ä¸€ä¸ª**è™šå‡½æ•°è¡¨**ï¼Œè¯¥ç±»çš„ä»»ä½•å¯¹è±¡éƒ½åœ¨æœ€å¼€å¤´å­˜æ”¾æœ‰è¯¥è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆã€‚

<img src="./../typora-images\image-20250307172357749.png" alt="image-20250307172357749" style="zoom:33%;" />

<img src="./../typora-images\image-20250307172421808.png" alt="image-20250307172421808" style="zoom:30%;" />

æ¯”å¦‚ä»¥ä¸‹ä¹±æå°±å¯ä»¥ææ‰å¤šæ€ã€‚

```c++
class A{
    public: virtual void Func() { cout << "A::Func"<< endl;}
};
class B: public A{
	public: virtual void Func() { cout << "B::Func" << endl; }
};

int main(){
    A a;
    A * pa = new B();
    pa->Func(); //output: B::Func
    //è‹¥æ˜¯64ä½ç¨‹åºï¼ŒæŒ‡é’ˆä¸º8å­—èŠ‚ï¼Œåˆ™åº”ä¸ºlong long
    long *p1 = (long*)&a;
    long *p2 = (long*)pa;
    *p2 = *p1; //ç›¸å½“äºæŠŠpaæŒ‡å‘çš„Bå¯¹è±¡çš„è™šå‡½æ•°è¡¨æŒ‡é’ˆåœ°å€å˜æˆäº†açš„æŒ‡é’ˆåœ°å€, whichæŒ‡å‘Açš„è™šå‡½æ•°è¡¨
    pa->Func(); //output: A::Func
    return 0;
}
```



### è™šææ„å‡½æ•°

é€šè¿‡åŸºç±»æŒ‡é’ˆåˆ é™¤æ´¾ç”Ÿç±»å¯¹è±¡æ—¶ï¼Œåªè°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°ï¼Œä½†æˆ‘ä»¬å¸Œæœ›å…ˆè°ƒç”¨æ´¾ç”Ÿç±»ææ„å‡½æ•°ã€‚é‡‡ç”¨è™šææ„å‡½æ•°å³å¯å…ˆè°ƒç”¨æ´¾ç”Ÿç±»è™šæ„å‡½æ•°ã€å†è°ƒç”¨åŸºç±»è™šæ„å‡½æ•°ã€‚

**åªè¦æ‰“ç®—æŠŠä¸€ä¸ªç±»ä½œä¸ºåŸºç±»ï¼Œå°±åº”è¯¥æŠŠææ„å‡½æ•°å®šä¹‰ä¸ºè™šå‡½æ•°**ã€‚



### çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»

**çº¯è™šå‡½æ•°**ï¼šæ²¡æœ‰å‡½æ•°ä½“çš„è™šå‡½æ•°

```c++
virtual void print() = 0;  //completely without å‡½æ•°ä½“
```

è‹¥ä¸€ä¸ªç±»åŒ…å«çº¯è™šå‡½æ•°ï¼Œåˆ™è¯¥ç±»æˆä¸º**æŠ½è±¡ç±»**ã€‚

æŠ½è±¡ç±»çš„å¯¹è±¡ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œåªèƒ½åˆ›å»ºæ´¾ç”Ÿç±»å¯¹è±¡ã€‚

æŠ½è±¡ç±»çš„æˆå‘˜å‡½æ•°å†…å¯ä»¥è°ƒç”¨çº¯è™šå‡½æ•°ï¼Œä½†æ„é€ /ææ„å‡½æ•°å†…ä¸èƒ½è°ƒç”¨çº¯è™šå‡½æ•°ã€‚

æŠ½è±¡ç±»çš„æ´¾ç”Ÿç±»åªæœ‰æŠŠæ‰€æœ‰çº¯è™šå‡½æ•°é‡å†™ä¸€éæ‰èƒ½ä¸æ˜¯æŠ½è±¡ç±»ã€‚



---

## lecture 6&7. pythonä¿®å…»

### è¯­æ³•

ä¸€è¡Œå¤ªé•¿å¯ä»¥ä½¿ç”¨ " \ " å’Œ "()" æ¢è¡Œ

```python
if a > 3 and \
	d = 3:
    blabla
if (a > 3 and
   d = 3):
    blabla
```



### å˜é‡

å¿…é¡»åˆå§‹åŒ–

intï¼šæœ‰åè¿›åˆ¶ï¼ŒäºŒè¿›åˆ¶ï¼ˆ0b101011ï¼‰ï¼Œå…«è¿›åˆ¶ï¼ˆ0o123457ï¼‰ï¼Œåå…­è¿›åˆ¶ï¼ˆ0x123ab2ABï¼‰ã€‚

â€‹	*å¯ä»¥ä»»æ„é•¿ï¼Œä½†æ˜¯è¶…è¿‡é•¿åº¦äº†ä¼šç”¨æ•°ç»„å­˜ï¼ŒåŠ æ³•å˜ä¸ºO(n)ã€‚

strï¼šå­—ç¬¦ä¸² `a = str()`æ–°å»ºä¸€ä¸ªç©ºä¸²

listï¼šåˆ—è¡¨ï¼ˆå†…éƒ¨ç±»å‹å¯ä»¥ä¸åŒçš„æ•°ç»„ï¼‰`l = [1, "ok", 3.14]`

tupleï¼šå…ƒç»„ï¼Œå…ƒç´ ä¸å¯å˜çš„æ•°ç»„ã€‚`t = (1, 2, 3)`

â€‹	*å¦‚æœåªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œéœ€è¦`t = (3, )`


dictï¼šå­—å…¸ï¼ˆæŸ¥è¯¢éƒ½æ˜¯O(1)ï¼‰`d = {'a': 1, 'b': 2}`

å¯ä»¥ç”¨`isinstance(a, str)`åˆ¤æ–­æ˜¯å¦æ˜¯è¿™ä¸ªç±»å‹ï¼ˆè¾“å‡ºTrue/Falseï¼‰

å¸¸é‡ True ç­‰ä»·äº 1ï¼ŒFalse ç­‰ä»·äº 0ã€‚ä½†åˆ¤æ–­çœŸå‡æ—¶æ‰€æœ‰éé›¶/éç©ºå‡ä¸ºçœŸï¼Œç©º str, tuple, list, dict ä¸ºå‡ã€‚

```python
print("" == False) #False
print(2 == True) #False
if(not "") print(True) #True
if(2) print(True) #True
```

æ‰€æœ‰å­—ç¬¦é‡‡ç”¨ unicode ç¼–ç ï¼Œä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚

- `chr(x)`æŠŠæ•´æ•°ç¼–ç è½¬æ¢ä¸ºå­—ç¬¦ï¼ˆé•¿åº¦ä¸º1çš„å­—ç¬¦ä¸²ï¼‰ã€‚

- `ord(x)`æŠŠå­—ç¬¦è½¬æ¢ä¸ºæ•´æ•°ç¼–ç ã€‚

- `str()`

- `repr()`è½¬å‡ºä¸€ä¸ªåˆæ³• python è¡¨è¾¾å¼

  ```python
  print(str("hello")) #hello
  print(repr("hello")) #'hello'
  ```

å­—ç¬¦ä¸²å¯ä»¥ç”¨å•å¼•å·ã€åŒå¼•å·ã€ä¸‰å•å¼•å·ã€ä¸‰åŒå¼•å·å¼•èµ·æ¥ã€‚

```python
print("abcdefg"[-1]) #g
print("abcdefg"[1:3]) #bc
print("abcdefg"[:]) #abcdefg ç¼ºçœå€¼ä¸º0, æœ€åä¸€ä¸ªå­—ç¬¦
print(len("abcdefg")) #7

print(r'ab\ncd') #ä¸è½¬ä¹‰çš„å­—ç¬¦ä¸² ab\ncd
print("abc"*3) #abcabcabc
print("hell" in "hello") #True

#evalçš„å‚æ•°ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æŒ‰ç…§pythonè¡¨è¾¾å¼æ¥è®¡ç®—
print(eval("3+2")) #5
a = 1
print(eval("3+a")) #4

s1 = "abcdefg"
s2 = s1.replace("abc", "ABC")
print(s1, s2) #abcdefg ABCdefg

print(" 2sef ".strip()) #2sef #å»é™¤å·¦å³ç©ºæ ¼
```



### is ä¸ ==

æ‰€æœ‰çš„å˜é‡æœ¬è´¨ä¸Šéƒ½æ˜¯æŒ‡é’ˆ

a is bï¼ša å’Œ b æŒ‡å‘åŒä¸€ä¸ªåœ°æ–¹

a == bï¼šæŒ‡å‘çš„åœ°æ–¹æ”¾çš„ä¸œè¥¿ç›¸åŒ

a = bï¼šä½¿ a æŒ‡å‘ b æŒ‡å‘çš„åœ°æ–¹

> [!NOTE]
>
> int, float, complex, str, tuple ç±»å‹éƒ½æ˜¯ä¸å¯å˜ç±»å‹ï¼Œå› æ­¤`a = 100`çš„æ—¶å€™å…¶å®æ”¹äº†æŒ‡é’ˆä½ç½®ï¼Œè®© a æŒ‡å‘äº†100çš„ä½ç½®ã€‚æ‰€ä»¥ä¸å¯å˜ç±»å‹ä¸éœ€è¦å…³æ³¨æ˜¯ is è¿˜æ˜¯ ==ã€‚
>
> list, dict éƒ½å¯ä»¥æ”¹ã€‚æ³¨æ„åˆ—è¡¨çš„å…ƒç´ ä¹Ÿæ˜¯æŒ‡é’ˆã€‚
>
> ä¸¾ä¾‹ï¼š
>
> ```python
> a = (1, 2, 3)
> b = (1, 2, 3)
> print(a == b) # true
> print(a is b) # true
> a = [1, 2, 3]
> b = [1, 2, 3]
> print(a == b) # true
> print(a is b) # false
> print([1, 2, 3] is [1, 2, 3]) # false
> b = a
> print(a is b) # true
> ```



### è¿ç®—

/ï¼šå¾—åˆ°æµ®ç‚¹æ•°

//ï¼šæ•´æ•°é™¤æ³•

x**yï¼šæ±‚ x çš„ y æ¬¡å¹‚

```python
print(15//4) #3
print(3.4//2.2) #1.0 æœ‰å°æ•°å‚ä¸ç»“æœå°±ä¸€å®šæ˜¯å°æ•°
print(10/2) #5.0 æœ‰é™¤æ³•å°±ä¸€å®šæ˜¯å°æ•°
```



### è¾“å…¥è¾“å‡º

`input()`ï¼šè¿”å›è¾“å…¥çš„**å­—ç¬¦ä¸²**ï¼ˆåˆ°å›è½¦ä¸ºæ­¢ï¼ŒåŒ…å«ç©ºæ ¼ï¼Œä¸åŒ…å«å›è½¦ï¼‰

```python
lst = input().split(",") #å°†è¾“å…¥å¤šé¡¹æ‹†åˆ†ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œç¼ºçœç”¨ç©ºæ ¼/å›è½¦åŒºåˆ†
x, y, z = int(lst[0]), lst[1], int(lst[2]) #è¿™æ˜¯ä¸€ä¸ªå…ƒç»„ï¼ˆå…ƒç»„å¯çœç•¥æ‹¬å·ï¼‰
print(x+z, y)
# è¾“å…¥ 1 ok 3
# è¾“å‡º 4 ok
```

`print("hello", end="")`ï¼šend ç¼ºçœå€¼æ˜¯æ¢è¡Œç¬¦ã€‚

`print(x, y, z)`ï¼šå¯ä»¥è¾“å‡ºå¤šé¡¹ï¼Œä¼šè‡ªåŠ¨åŠ ç©ºæ ¼ã€‚

å¯ä»¥ç”¨æ ¼å¼æ§åˆ¶ç¬¦æ„é€ å­—ç¬¦ä¸²ï¼ˆå¯ä»¥è¾“å‡ºä¹Ÿå¯ä»¥ä¿å­˜æ¥å¹²åˆ«çš„ï¼‰

```python
print("æˆ‘å«%s ä»Šå¹´%då²ï¼" % ('å°æ˜', 10))
#ä¹Ÿå¯ä»¥fstring
s = "å°æ˜"
d = 10
print(f"æˆ‘å«{s} ä»Šå¹´{d}å²ï¼")
```



å¦‚æœæ²¡æœ‰è¾“å…¥ä½† s = input() åˆ™ç¨‹åºä¼š REã€‚

å¦‚æœæ€•ç¨‹åºé‡åˆ° RE æˆ–å…¶ä»–é—®é¢˜ä½†ä¸å¸Œæœ›å®ƒå´©æºƒï¼š

```python
try:
    while True:
        s = input()
        #...
except Exception as e:
    print(e)
```



### å¾ªç¯è¯­å¥

for <variable> in <sequence>:

â€‹	<statements>

else: 

â€‹	<statements>

> [!Note]
>
> else: å‰é¢æ‰§è¡Œå®Œåå†æ‰§è¡Œè¿™ä¸€æ¡ï¼Œå¦‚æœ break äº†å°±ä¸æ‰§è¡Œ
> while ä¹Ÿå¯ä»¥å†™ else

- range(5): [0, 5)
- range(5, 9): [5, 9)

pass è¡¨ç¤ºä»€ä¹ˆéƒ½ä¸å¹²



### å…ƒç»„

å…ƒç´ ä¸å¯å˜ï¼Œä½†ï¼š

```python
t = (1, [1, 2], 3)
t[1][1] = "ok"
print(t) # (1, [1, 'ok'], 3)
```

å…ƒç»„å’Œsträ¸€æ ·å¯ä»¥åˆ‡ç‰‡ã€åŠ ã€ä¹˜ã€‚

æœ‰è¶£çš„äº‹æƒ…ï¼š

```python
t = (1, 2, 3)
b = t;
print(b is t) #True
b += (4,)
print(b) #(1, 2, 3, 4)
print(t) #(1, 2, 3)
#å› ä¸ºå…ƒç»„ä¸å¯å˜ï¼Œ+=å®é™…ä¸Šæ˜¯æ–°å»ºäº†ä¸€ä¸ªå…ƒç»„
```



### åˆ—è¡¨

ä¹Ÿå¯ä»¥åˆ‡ç‰‡ã€åŠ ã€ä¹˜ã€åˆ¤æ–­ inã€‚*åˆ—è¡¨çš„åŠ ä¸ºåŸåœ°åŠ ï¼Œåˆ‡ç‰‡ä¸ºä¸€å¼ æ–°çš„åˆ—è¡¨*

#### æ·±æ‹·è´

å¦‚æœæƒ³è¦æ·±æ‹·è´

```python
a = [1, [2]]
b = a[:] #è¯•å›¾é€šè¿‡åˆ‡ç‰‡éš”ç¦»å…³ç³»
b.append(4)
print(b) #[1, [2], 4]
#ç„¶è€Œä»ç„¶åªæ˜¯æ‹·è´äº†åˆ—è¡¨å…ƒç´ çš„æŒ‡é’ˆï¼Œè¿˜ä¸å¤Ÿæ·±
a[1].append(3)
print(a) #[1, [2, 3]]
print(b) #[1, [2, 3], 4]
```

çœŸæ­£è§£å†³é—®é¢˜ï¼š

```python
import copy
b = copy.deepcopy(a) #å½»åº•çš„æ— å…³ï¼
```

ä¸€äº›åˆ—è¡¨ç”Ÿæˆå¼ï¼š

```python
a = [x*x for x in range(1, 11) if x % 2 == 0]
print(a) #[4, 16, 36, 64, 100]
a = [m + n for m in 'AB' for n in '12']
print(a) #['A1', 'A2', 'B1', 'B2']
```



#### map å’Œ filter

map(function, sequence), å°†ä¸€ä¸ªåˆ—è¡¨(å…ƒç»„)æ˜ å°„åˆ°å¦ä¸€ä¸ªåˆ—è¡¨(å…ƒç»„)
filter(function, sequence), æŒ‰ç…§æ‰€å®šä¹‰çš„å‡½æ•°è¿‡æ»¤æ‰åˆ—è¡¨(å…ƒç»„)ä¸­çš„ä¸€äº›å…ƒç´ 


```python
def f1(x):
    return x * 2
def f2(x):
    return x % 2 == 0
ls = [1,2,3,4,5]
ls1 = list(map(f1,ls))    #mapå»¶æ—¶æ±‚å€¼
print(lsl) #=>[2, 4, 6, 8, 10]
ls1 = list(filter(f2,ls)) #filter å»¶æ—¶æ±‚å€¼
print(lsl) #=>[2, 4]
```

*å»¶æ—¶æ±‚å€¼ï¼šå­˜å‚¨äº†è¿™ä¸ªæ“ä½œï¼Œä½†å…¶å®å¹¶æ²¡æœ‰çœŸçš„å»åšï¼Œåœ¨éœ€è¦ç”¨åˆ°å€¼çš„æ—¶å€™æ‰åš

è¿˜å¯ä»¥è¿™ä¹ˆç”¨ï¼š

```python
def abc(a, b, c):
    return a*10000 + b*100 + c
list1 = [11,22,33]
list2 = [44,55,66]
list3 = [77,88,99]

x = list(map(abc,list1,list2,list3))
print(x) #=> [114477, 225588, 336699]
```

æ‰€ä»¥å¯ä»¥ç›´æ¥æ–¹ä¾¿å†™ï¼š

```python
x, y, z = map(int, input().split())
```



#### äºŒç»´åˆ—è¡¨

é”™è¯¯ç‰ˆï¼š

```python
array = [1, 2, 3]
matrix = [array*3]
print (matrix) # [[1, 2, 3, 1, 2, 3, 1, 2, 3]], **éäºŒç»´æ•°ç»„**

array = [0, 0, 0]
matrix = [array] * 3
print(matrix) # [[0, 0, 0], [0, 0, 0], [0, 0, 0]]
matrix[0][1] = 1
print(matrix) # [[0, 1, 0], [0, 1, 0], [0, 1, 0]], **éäºŒç»´æ•°ç»„**
```

æ­£ç¡®ç‰ˆï¼š

```python
matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
print(matrix)    # [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
print(matrix[1][1])   # 5
matrix = [[0 for j in range(3)] for i in range(3)]
print(matrix)   #[[0, 0, 0], [0, 0, 0], [0, 0, 0]]
matrix = [[i*3+j for j in range(3)] for i in range(3)]
print(matrix)   # [[0, 1, 2], [3, 4, 5], [6, 7, 8]]
```



#### sort

python çš„æ’åºæ˜¯ç¨³å®šçš„ã€‚

```python
a = [5,7,6,3,4,1,2]
a.sort()    # [1, 2, 3, 4, 5, 6, 7]
a = [5,7,6,3,4,1,2]
b = sorted(a)    # b: [1, 2, 3, 4, 5, 6, 7], aä¸å˜ #å…ƒç»„ä¹Ÿå¯ä»¥ä½¿ç”¨sorted
a = [25,7,16,33,4,1,2]
a.sort(reverse = True)   # [33, 25, 16, 7, 4, 2, 1] sortedç±»ä¼¼
```

è‡ªå®šä¹‰

```python
def myKey(x): # å‡½æ•°
    return x % 10
a = [25,7,16,33,4,1,2]
a.sort(key = myKey) # keyæ˜¯å‡½æ•°ï¼ŒsortæŒ‰å¯¹æ¯ä¸ªå…ƒç´ è°ƒç”¨è¯¥å‡½æ•°çš„è¿”å›å€¼ä»å°åˆ°å¤§æ’åº
# [1, 2, 33, 4, 25, 16, 7] æŒ‰ä¸ªä½æ•°æ’åº

sorted("This is a test string from Andrew".split(), key=str.lower)
# ['a', 'Andrew', 'from', 'is', 'string', 'test', 'This']
```



### lamda è¡¨è¾¾å¼

ä¸€ä¸ªåªç”¨ä¸€æ¬¡çš„æ²¡æœ‰åå­—çš„å‡½æ•°ã€‚

lambda *å‚æ•°è¡¨* : *è¿”å›å€¼*

```python
students.sort(key = lambda x: x[2] )
students.sort(key = lambda x: (-x[2], x[1], x[0]) )

k = lambda x, y: x+y
print( k(4, 5) ) # 9
```



### å­—å…¸

æŸ¥æ‰¾æ—¶é—´å’Œå­—å…¸å…ƒç´ ä¸ªæ•°æ— å…³ã€‚

å…³é”®å­—å¿…é¡»å¯å“ˆå¸Œï¼ˆä¸èƒ½æ›´æ”¹ï¼‰ã€‚ï¼ˆåˆ—è¡¨å’Œé›†åˆä¸å¯ä½œä¸ºå­—å…¸çš„å…³é”®å­—ï¼‰

1. `d.items()`: å–å­—å…¸çš„æ‰€æœ‰å…ƒç´ ï¼Œä¸ºå…³é”®å­—å’Œå€¼çš„å…ƒç»„ã€‚

2. `d.keys()`: å¾—åˆ°æ‰€æœ‰å…³é”®å­—

3. `d.values()`: å¾—åˆ°æ‰€æœ‰å€¼

4. åˆ¤æ–­å…³é”®å­—æ˜¯å¦åœ¨å­—å…¸ä¸­å°±å¯ä»¥ç›´æ¥`if 'alice' in d`

5. è¾ƒæµ…æ‹·è´ï¼š`y = x.copy()` æ·±æ‹·è´å°±ä½¿ç”¨`y = copy.deepcopy(x)`

   ```python
   x = {'alice': 1, 'bob': 2, 'tree': [1, 2]}
   y = x.copy()
   y['alice'] = 0
   y['tree'].append(3)
   print(y) # {'alice': 0, 'bob': 2, 'tree': [1, 2, 3]}
   print(x) # {'alice': 1, 'bob': 2, 'tree': [1, 2, 3]}
   ```



### é›†åˆ

æŸ¥æ‰¾æ—¶é—´å’Œé›†åˆå…ƒç´ ä¸ªæ•°æ— å…³ã€‚

å…ƒç´ å¿…é¡»å¯å“ˆå¸Œï¼ˆä¸èƒ½æ›´æ”¹ï¼‰ã€‚ï¼ˆåˆ—è¡¨å’Œé›†åˆä¸å¯ä½œä¸ºé›†åˆçš„å…ƒç´ ï¼‰

1. æ·»åŠ å…ƒç´ ï¼š`a.add("233")`ã€‚`a.update([1, 2, 3])`å°† 1, 2, 3 åˆ†å¼€åŠ å…¥ã€‚`a.update("take")` åŠ å…¥ t, a, k, eã€‚
2. åˆ é™¤å…ƒç´ ï¼š`a.discard(x)` `a.remove(x)` å¦‚æœ x ä¸å­˜åœ¨ï¼Œdiscard ä¸ä¼šæŠ¥é”™ï¼Œremove ä¼šã€‚
3. å¯ä»¥äº¤å¹¶å·®ï¼š`a & b` `a | b` `a - b`



### å‡½æ•°

å‚æ•°ä¸ªæ•°ä¸å®šçš„å‡½æ•°ï¼š

```python
def func(a, *b):
    print(b)
func(1, 2, 'ok', [1,2]) #(2, 'ok', [1,2])
func(*(1, 2, 3)) #(2, 3)
func((1, 2, 3)) #()
```



---

## Lecture 8. Python 3

### å…¨å±€å˜é‡



### è·¨æ–‡ä»¶å¼•ç”¨å‡½æ•°å’Œå˜é‡

```python
from head import hello # helloä¸ºå‡½æ•°æˆ–å˜é‡
```



### é¢å‘å¯¹è±¡

æˆå‘˜å‡½æ•°ï¼š

<img src="./../typora-images\image-20250321154731922.png" alt="image-20250321154731922" style="zoom:25%;" />

init è®°å¾—è¦è°ƒç”¨çˆ¶ç±»çš„ initï¼Œä¸ç„¶ä¸ä¼šæœ‰çˆ¶ç±»çš„æˆå‘˜ã€‚

å¦‚æœä¸å†™ eqï¼Œä¼šè‡ªåŠ¨å¸®ä½ å†™ä¸€ä¸ªï¼Œä½†åªåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡åœ°å€æ˜¯å¦ç›¸åŒï¼ˆç­‰ä»·äºisï¼‰ã€‚
#å¦‚æœä¸å†™ lt le gt geï¼Œåˆ™å…¨éƒ¨å˜æˆNULLã€‚

```python
print(a) #ç­‰ä»·äº print(str(a))
p = eval(repr(a)) #repré€šå¸¸è¿”å›ä¸€ä¸ªå¯æ‰§è¡Œå­—ç¬¦ä¸²
```

å¯¹è±¡å¯ä»¥éšæ—¶è«åå…¶å¦™å¢åŠ æˆå‘˜ã€‚

åœ¨ init å¤–é¢å†™å˜é‡å°±æ˜¯**é™æ€æˆå‘˜å˜é‡**ã€‚

**é™æ€æ–¹æ³•ä¸ç±»æ–¹æ³•**ï¼š

```python
class A:
    n = 10
    @staticmethod
    def func1(): #å°±ä¸ä¼ selfäº†
        print()
    @classmethod
    def func2(cls, x): #å¯ä»¥æŠŠclså½“ä½œç±»åä½¿ç”¨
        print(cls.n) #ç­‰ä»·äºprint(A.n)
```

ç§æœ‰å±æ€§ï¼šåœ¨å‰é¢åŠ å•ä¸ªä¸‹åˆ’çº¿å°±å¯ä»¥åœ¨ä¸‹æ‹‰æ¡†æ˜¾ç¤ºæˆå‘˜æ—¶éšè—ï¼Œä½†å®é™…å¯ä»¥ä½¿ç”¨ã€‚åœ¨å‰é¢åŠ ä¸¤ä¸ªä¸‹åˆ’çº¿å°±å¯ä»¥æ— æ³•é€šè¿‡è¿™ä¸ªåå­—è®¿é—®ï¼Œå› ä¸ºè¢« python æ›´åä¸º _A__qã€‚å®é™…è¿˜æ˜¯å¯ä»¥ä½¿ç”¨ã€‚

#### property

å¯ä»¥æŠŠå¯¹å¤šä¸ªæˆå‘˜å˜é‡çš„è®¿é—®ç»‘åœ¨ä¸€èµ·ã€‚

```python
class foo:
    def __init__(self):
        self.name = 'yoda'
        self.work = 'master'
    def get_person(self):
        return self.name, self.work
    def set_person(self, value):
        self.name, self.work = value
    person = property(get_person, set_person)
    
A3 = foo()
print(A3.person) 
A3.person = 'skylaer', 'programer'
print(A3.person)  # è¾“å‡º: ('skylaer', 'programer')
```

å¦ä¸€ç§ç”¨æ³•ï¼š

```python
class foo:
    def __init__(self):
        self.name = 'yoda'
        self.work = 'master'

    @property
    def person(self):
        return self.name, self.work

    @person.setter  # å¦‚æœä¸æŒ‡å®š `setter` å±æ€§ï¼Œé‚£ä¹ˆæ— æ³•ä»ç±»çš„å¤–éƒ¨å¯¹å®ƒçš„å€¼è¿›è¡Œè®¾ç½®ï¼Œè¿™å¯¹äºåªè¯»ç‰¹æ€§éå¸¸æœ‰ç”¨
    def person(self, value):
        self.name, self.work = value
```

#### å¯å“ˆå¸Œ

è‡ªå®šä¹‰å¯¹è±¡é»˜è®¤å¯å“ˆå¸Œï¼Œå“ˆå¸Œçš„å®é™…ä¸Šæ˜¯å¯¹è±¡çš„åœ°å€ã€‚é‡è½½äº† eq åä¸å¯å“ˆå¸Œï¼Œå†é‡è½½ hash åˆ™åˆå¯ä»¥å“ˆå¸Œã€‚

```python
class A:
    def __init__(self, x):
        self.x = x
    def __eq__(self, other):
        blabla
    def __hash__(self):
        return x
```

#### è¿ç®—ç¬¦é‡è½½

<img src="./../typora-images\image-20250321162623531.png" alt="image-20250321162623531" style="zoom:33%;" />

```python
def __gt__(self, other): #>
        return self.value > other.value   
def __lt__(self, other): #<
        return self.value < other.value
def __ge__(self, other): #>=
        return self.value >= other.value  
```



ç´¢å¼•é‡è½½ï¼š

```python
class indexer:
    def __getitem__(self, index): 
        return index ** 2
    def __setitem__(self, index, val):
        print(index, val)


X = indexer()
for i in range(5):
    print(X[i])  # è¾“å‡º: 0, 1, 4, 9, 16
X[2] = 10  # è¾“å‡º: 2 10
```

è°ƒç”¨å‡½æ•°é‡è½½ï¼š

```python
class Prod:
    def __init__(self, value):
        self.value = value
    def __call__(self, other): #ç›¸å½“äºc++é‡è½½()è¿ç®—ç¬¦
        return self.value * other

p = Prod(2)
print(p(1))
print(p(2))
```



### å‡½æ•°å¼ç¨‹åºè®¾è®¡

æ„æ€æ˜¯å‡½æ•°å¯ä»¥ç”¨æ¥ç»™å˜é‡èµ‹å€¼ã€‚å‡½æ•°å¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼å’Œå‚æ•°ã€‚

```python
def combine(f, g):
    return lambda x:f(g(x))
print(combine(lambda x:x+1, lambda x:x*x)(4)) #17
```

#### é—­åŒ…

é—­åŒ…ï¼šå¸¦è‡ªç”±å˜é‡çš„å‡½æ•°

```python
def func(x):
    def g(y):
        nonlocal x  # æœ‰äº†æ­¤è¡Œï¼Œæ‰èƒ½åœ¨ g ä¸­å¯¹ x èµ‹å€¼
        x += 1
        return x + y
    return g

# åˆ›å»ºé—­åŒ… fï¼Œå…¶è‡ªç”±å˜é‡ x çš„åˆå€¼æ˜¯ 10
f = func(10)
print(f(4))  # è¾“å‡º: 15
print(f(5))  # è¾“å‡º: 17 # è‡ªç”±å˜é‡å¯ä»¥ä¿æŒå®ƒçš„å€¼

# åˆ›å»ºé—­åŒ… gï¼Œå…¶è‡ªç”±å˜é‡ x çš„åˆå€¼æ˜¯ 20
g = func(20)
print(g(4))  # è¾“å‡º: 25
print(g(5))  # è¾“å‡º: 27
```

#### ååº”ç”¨å‡½æ•°

```python
from functools import partial

add = lambda a, b: a + b
add1024 = partial(add, 1024) #ä½¿ç”¨ partial å›ºå®š add å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•° a ä¸º 1024
print(add1024(1))   # è¾“å‡º: 1025
print(add1024(10))  # è¾“å‡º: 1034
```



---

## Lecture 9. Python 4

### è¿­ä»£å™¨

æ”¯æŒ`__iter__()`å’Œ`__next__()`æ“ä½œçš„å°±å«è¿­ä»£å™¨ã€‚

- `it = iter(x)` è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆå¯ä»¥æ˜¯å¯¹è±¡æœ¬èº«ï¼‰
- `it = next(it)`è¿”å›ç°å…ƒç´ å¹¶æŒ‡é’ˆå¾€åæŒª

```python
# for i in x æœ¬è´¨ä¸Šæ˜¯
it = iter(x)
while True:
    try:
        ...
        it = next(it)
    except StopIteration: break
```

æœ‰è¿­ä»£å™¨å°±æ”¯æŒä¸‹æ ‡è®¿é—®ï¼Œé€šè¿‡`__getitem__()`å®ç°

```python
class MyList:
    def __init__(self, data):
        self.data = data
    def __getitem__(self, index): # å³é‡è½½è¿ç®—ç¬¦[]
        return self.data[index]

my_list = MyList([1, 2, 3, 4, 5])
print(my_list[2])
```

å¦‚æœå†™äº†`__getitem__()`ä½†æ²¡å†™`__iter__()`å’Œ`__next__()`ï¼Œåˆ™ python ä¼šè‡ªåŠ¨å¸®ä½ å†™ä¸€ä¸ªã€‚



### ç”Ÿæˆå™¨

ä¸€ä¸ªå»¶æ—¶æ±‚å€¼å¯¹è±¡ï¼Œæ”¯æŒè¿­ä»£ï¼Œç”¨å¤„ï¼šç”Ÿæˆå¾ˆå¤§çš„æ•°åˆ—ï¼Œä¸éœ€è¦ä¸€æ¬¡æ€§ç”Ÿæˆï¼Œç”¨å¤šå°‘æ±‚å¤šå°‘ã€‚

æœ‰`yield`å…³é”®å­—å°±æ˜¯ç”Ÿæˆå™¨ï¼Œä½œç”¨ç›¸å½“äº`return`ã€‚

æœ‰`yield`çš„å‡½æ•°è¢«è°ƒç”¨æ—¶è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œnext(x) å¾€åæ‰§è¡Œç›´åˆ°ç¢°åˆ° yield è¿”å›ã€‚

```python
# ç”¨ç”Ÿæˆå™¨å‡½æ•°æ±‚æ–æ³¢é‚£å¥‘æ•°åˆ—å‰ n é¡¹
def fibonacci(n):
    a, b, counter = 0, 1, 0
    while counter <= n:
        yield a
        a, b = b, a + b
        counter += 1

f = fibonacci (10) # f æ˜¯ä¸€ä¸ªè¿­ä»£å™¨
for i in f:
	print(i, end=" ") # å¾—åˆ° 0 1 1 2 3 5 8 13 21 34 55
```

å¯ä»¥é€šè¿‡ send å¾€ç”Ÿæˆå™¨é‡Œä¼ å˜é‡

```python
def h():
    print('hello')       # (1) ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æ‰§è¡Œ
    m = yield 5          # (2) ç¬¬ä¸€æ¬¡è¿”å› 5ï¼Œå¹¶æš‚åœï¼ˆç­‰å¾… send ä¼ å…¥ m çš„å€¼ï¼‰
    print("m=", m)       # (3) æ”¶åˆ° send ä¼ å…¥çš„å€¼åæ‰§è¡Œ
    d = yield 12         # (4) è¿”å› 12ï¼Œå¹¶æš‚åœï¼ˆç­‰å¾… send ä¼ å…¥ d çš„å€¼ï¼‰
    print('d=', d)       # (5) æ”¶åˆ° send ä¼ å…¥çš„å€¼åæ‰§è¡Œ
    yield 13             # (6) è¿”å› 13ï¼Œå¹¶æš‚åœ

c = h() # åˆ›å»ºç”Ÿæˆå™¨å¯¹è±¡
x = next(c) # ç”Ÿæˆå™¨å¼€å§‹å·¥ä½œï¼Œè¾“å‡º hello
print(x) # 5ï¼ˆç”Ÿæˆå™¨è¿”å›ç»™ x 5ï¼‰
y = c.send("ok") # è¾“å‡º m = ok
print(y) # 12
z = c.send("good") # è¾“å‡º d = good
print(z) # 13
```

eg. ç”¨ç”Ÿæˆå™¨æ±‚å…¨æ’åˆ—

```python
def perm(items):
    n = len(items)
    if n == 1:
        yield items
    for i in range(n):
        v = items[i:i+1]
        rest = items[:i] + items[i+1:]
        for p in perm(rest):
            yield v + p
```



### compile å’Œ exec

```python
str = "for i in range(0,10): print(i,end =' ')"
c = compile(str,'','exec') #ç¼–è¯‘
exec(c) # 0 1 2 3 4 5 6 7 8 9

str2 = "3*x + 4*y"
c2 = compile(str2 , '', 'eval')
result = eval (c2)
print(result) #>>32
```

compile å®Œåå¯ä»¥åå¤ exec(c) æˆ– eval(c)ï¼Œæ›´å¿«ã€‚

å¯ä»¥è§„å®š**ä½œç”¨åŸŸ**

```python
a = 10
b = 20
scope = {} #ç”¨å­—å…¸å½“ä½œç”¨åŸŸ
scope['a'] = 3
scope['b'] = 4
print(eval("a+b")) #30
print(eval("a+b", scope)) #7
```



### åå°„

å¯ä»¥ç”¨æ¥è·å–å¯¹è±¡çš„ä¿¡æ¯

```python
class A():
    def __init__(self, x):
        self.x = x
    def func(self):
        print("x =", self.x)

a = A(12)
print(dir(a))  # åˆ—å‡ºå¯¹è±¡æ‰€å±ç±»çš„å±æ€§ï¼Œæ–¹æ³•
# è¾“å‡º: ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', 
#       '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', 
#       '__init__', '__le__', '__lt__', '__module__', '__ne__', '__new__', 
#       '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', 
#       '__str__', '__subclasshook__', '__weakref__', 'func', 'x']
if hasattr(a, 'x'):  # åˆ¤æ–­å¯¹è±¡æœ‰æ— å±æ€§æˆ–æ–¹æ³•åä¸º 'x'
    setattr(a, 'x', 'hello,world')
print(getattr(a, 'x')) # è¾“å‡º: hello,world
if hasattr(a, 'func'):
    getattr(a, 'func')()  # è°ƒç”¨ a.funcï¼Œè¾“å‡º: x = hello,world
```



### è£…é¥°å™¨

```python
def good(func):
    def wrapper(*args):
        print("%s called" % func.__name__)  # æ‰“å°è¢«è£…é¥°çš„å‡½æ•°å
        return func(*args) + 5              # è°ƒç”¨åŸå‡½æ•°å¹¶åŠ 5
    return wrapper

@good  # ç­‰ä»·äº mysum = good(mysum)
def mysum(a, b, c):
    return a + b + c

print(mysum(3, 4, 5))  # è¾“å‡º: mysum called â†’ 3+4+5 + 5 = 17
```

å¸¦å‚æ•°çš„è£…é¥°å™¨

```python
def good2(var1):                     # å¤–å±‚æ¥æ”¶è£…é¥°å™¨å‚æ•°
    def decorator(func):             # ä¸­å±‚æ¥æ”¶è¢«è£…é¥°çš„å‡½æ•°
        def wrapper(*args):          # å†…å±‚æ¥æ”¶å‡½æ•°å‚æ•°
            print("%s called" % func.__name__)
            return func(*args) + var1  # è°ƒç”¨åŸå‡½æ•°å¹¶åŠ  var1
        return wrapper
    return decorator

@good2(10)  # ç­‰ä»·äº f = good2(10)(f)
def f(x, y):
    return x * y

@good2(100)  # ç­‰ä»·äº f2 = good2(100)(f2)
def f2(x, y):
    return x * y

print(f(1, 2))   # è¾“å‡º: f called â†’ 1*2 + 10 = 12
print(f2(1, 2))  # è¾“å‡º: f2 called â†’ 1*2 + 100 = 102
```



---

## Lecture 11. è¯»å†™

### æ ‡å‡†æµå¯¹è±¡

cout è¾“å‡ºåˆ°å¤–éƒ¨æ–‡ä»¶æ—¶ï¼Œcerr å’Œ clog å¯ä»¥è¾“å‡ºè°ƒè¯•ä¿¡æ¯åˆ°å±å¹•ä¸Šã€‚



### æµæ“çºµç®—å­

setprecisionï¼š

- éå®šç‚¹è¾“å‡ºï¼ˆç§‘å­¦è®¡æ•°æ³•ï¼‰ï¼šprecision æŒ‡æ€»å…±æœ‰æ•ˆæ•°å­—
- å®šç‚¹è¾“å‡ºï¼ˆæ­£å¸¸æ•°å­—ï¼‰ï¼šprecision æŒ‡å°æ•°ç‚¹åä½æ•°ï¼Œé€šè¿‡ setiosflag(ios::fixed) å¼ºåˆ¶è®¾å®šï¼Œé€šè¿‡resetiosflag(ios::fixed) å–æ¶ˆè®¾å®šã€‚

è‡ªå®šä¹‰ï¼š

```c++
ostream &tab (ostream &output){
    return output << '\t';
}
cout << "aa" << tab << "bb" << endl; //è¾“å‡º aa	bb
```

è¿™æ˜¯å› ä¸º iostream é‡è½½äº† <<

```c++
ostream &operator <<( ostream& (*p) (ostream&) ); //pä¸ºå‡½æ•°æŒ‡é’ˆï¼Œå‚æ•°ä¸ºostream&ï¼Œè¿”å›ä¸ºostream&
```

è®¾ç½®åŸŸå®½

```c++
cin.width(5);
cin >> setw(5); //äºŒè€…ç­‰ä»·ï¼Œåªä½œç”¨ä¸€æ¬¡
```





### æ–‡ä»¶è¯»å†™

```c++
#include <fstream> //åŒ…å«ofstream, ifstreamå¯¹è±¡
#include <sstream>
#include <string>
freopen("read.txt","r",stdin); //é‡å®šå‘
freopen("write.txt","w",stdout);
int Student::input(){
    string inputLine;
    getline(cin, inputLine);

    stringstream ss(inputLine);
    getline(ss, name, ',');
    ss >> age;
    cout << name << endl;

    return 0;
}
```

- ç»å¯¹è·¯å¾„ï¼š`c:\\tmp\\students.dat`
- ç›¸å¯¹è·¯å¾„ï¼šåœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹æ‰¾æ–‡ä»¶

#### è¯»å†™é€‰é¡¹

```c++
ios::out //è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œåˆ é™¤åŸæœ‰å†…å®¹
ios::app //è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œä¿ç•™åŸæœ‰å†…å®¹ï¼Œå°¾éƒ¨æ·»åŠ 
ios::ate //è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œä¿ç•™åŸæœ‰å†…å®¹ï¼Œä»»æ„æ·»åŠ 
ios::binary //ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€æ–‡ä»¶
ofstream fout;
fout.open("test.out", ios::out|ios::binary);
```

#### è¯»å†™æŒ‡é’ˆ

```c++
//è·å¾—å†™æŒ‡é’ˆçš„ä½ç½®
fout.seekp(10); //å°†å†™æŒ‡é’ˆç§»åŠ¨åˆ°ç¬¬10ä¸ªå­—èŠ‚å¤„
location = 10L;
fin.seekg(location, ios::beg); //ä»å¤´æ•°location
fin.seekg(location, ios::cur); //ä»å½“å‰ä½ç½®æ•°location
fin.seekg(location, ios::end); //ä»å°¾éƒ¨æ•°location
//location å¯ä»¥ä¸ºè´Ÿå€¼
```

#### äºŒè¿›åˆ¶æ–‡ä»¶è¯»å†™

```c++
int x=10;
fout.seekp(20, ios::beg);
fout.write((const char *)(&x), sizeof(int));
fin.seekg(0, ios::beg);
fin.read((char *)(&x), sizeof(int));
```



---

## Lecture 12. æ¨¡æ¿

ä½¿ç”¨æ¨¡æ¿çš„ç¨‹åºå°±å«æ³›å‹

### å‡½æ•°æ¨¡æ¿

```c++
template <class T> //ä½¿ç”¨å¤šä¸ªç±»å‹æ—¶ä¸º template <class T1, class T2>
void swap(T& x, T& y){
    T tmp = x;
    x = y;
    y = tmp;
}
```

ä½¿ç”¨æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”ç±»å‹çš„å‡½æ•°ã€‚(å‡½æ•°æ¨¡æ¿çš„å®ä¾‹åŒ–)

ä¹Ÿå¯ä»¥è‡ªå·±å®ä¾‹åŒ–ã€‚

```c++
swap<double>(a, b);
```

åŒ¹é…æ¨¡æ¿å‡½æ•°æ—¶ï¼Œä¸è¿›è¡Œç±»å‹è‡ªåŠ¨è½¬æ¢ã€‚

```c++
swap(1, 2.3); //error
```



### ç±»æ¨¡æ¿

```c++
template <class T1, class T2>
class Pair {
public:
    T1 key; 
    T2 value; 
    Pair(T1 k, T2 v) : key(k), value(v) {}
    // é‡è½½ < è¿ç®—ç¬¦ï¼ˆå£°æ˜ä¸ºæˆå‘˜å‡½æ•°ï¼‰
    bool operator < (const Pair<T1, T2>& p) const;
};

// ç±»å¤–å®ç° < è¿ç®—ç¬¦
template <class T1, class T2> // è¿˜éœ€è¦å†å†™ä¸€é
bool Pair<T1, T2>::operator < (const Pair<T1, T2>& p) const {
    return key < p.key;
}

// ç¤ºä¾‹ç”¨æ³•
Pair<int, string> p1(1, "Apple");
Pair<string, double> p2("hello", 1.2);
```

å‡½æ•°æ¨¡æ¿å¯ä»¥ç›´æ¥ä½œä¸ºç±»æ¨¡æ¿çš„æˆå‘˜å‡½æ•°ã€‚

ç±»å‹å‚æ•°è¡¨ä¸­ä¹Ÿå¯ä»¥å‡ºç°éç±»å‹å‚æ•°

```c++
template <class T, int size>
class CArray {
    T array[size];  // å›ºå®šå¤§å°çš„æ•°ç»„
public:
    void Print() {
        for (int i = 0; i < size; ++i) {
            cout << array[i] << endl;
        }
    }
};

// ç¤ºä¾‹ç”¨æ³•
CArray<double, 40> a2;
CArray<int, 50> a3;
```



### æ´¾ç”Ÿ

ç±»æ¨¡æ¿ä»ç±»æ¨¡æ¿æ´¾ç”Ÿ

```c++
template <class T1, class T2>
class A {
    T1 v1; T2 v2;
};

template <class T1, class T2>
class B : public A<T2, T1> {
    T1 v3; T2 v4;
};
```

ç±»æ¨¡æ¿ä»æ¨¡æ¿ç±»æ´¾ç”Ÿ

ç±»æ¨¡æ¿ä»æ™®é€šç±»æ´¾ç”Ÿã€æ™®é€šç±»ä»æ¨¡æ¿ç±»æ´¾ç”Ÿ...



### å‹å…ƒ

æƒ³æˆä¸ºå‹å…ƒçš„éƒ½å¯ä»¥æˆä¸ºå‹å…ƒ

å¦‚æœä¸€ä¸ªæ¨¡æ¿æ˜¯å‹å…ƒï¼Œåˆ™æ‰€æœ‰ä»æ¨¡æ¿ç”Ÿæˆçš„å‡½æ•°/ç±»éƒ½ä¸ºç±»çš„å‹å…ƒã€‚



### å­—ç¬¦ä¸²æµå¤„ç†

ä» string è¿›è¡Œè¾“å…¥è¾“å‡º

```c++
#include <iostream>
#include <string>
#include <sstream>
using namespace std;

int main() {
    string input("Input test 123 4.7 A");
    stringstream inputString(input);
    string string1, string2;
    int i; double d; char c;
    inputString >> string1 >> string2 >> i >> d >> c;
    
    ostringstream outputString;
    outputString << string1 << string2 << i << d << c << endl;
    //å°±ä¼šè·å¾—ä¸€ä¸ªstring
    return 0;
}
```



---

## Lecture 13. STLåº“

æ³›å‹ç¨‹åºè®¾è®¡ï¼æ ‡å‡†æ¨¡æ¿åº“æä¾›è‰¯å¥½æ¨¡æ¿ğŸ‘

### å®¹å™¨

- é¡ºåºå®¹å™¨ï¼švector, deque, list, ...
- å…³è”å®¹å™¨ï¼šmap, set, ...ã€‚å†…éƒ¨å…ƒç´ ä»å°åˆ°å¤§æ’åˆ—
- å®¹å™¨é€‚é…å™¨ï¼šstack, queue, ...

å¯¹è±¡è¢«æ”¾å…¥å®¹å™¨æ—¶ï¼Œæ”¾å…¥çš„æ˜¯ä¸€ä¸ªå¤åˆ¶å“ã€‚ï¼ˆè®°å¾—å†™å¤åˆ¶æ„é€ å‡½æ•°ï¼‰

### iterator

æ˜¯ä¸ªå†…éƒ¨ç±»ã€‚

```c++
vector<>::iterator it;
vector<>::const_iterator cit;
vector<>::reverse_iterator rit; //åå‘è¿­ä»£å™¨
for(it = v.begin(); it != v.end(); ++it){
    *it = 100;
}
for(rit = v.rbegin(); rit != v.rend(); ++rit){}
```

- åŒå‘è¿­ä»£å™¨

  eg. list, set, map

- éšæœºè®¿é—®è¿­ä»£å™¨ï¼šå¯ä»¥ç›´æ¥ it += i; å¯ä»¥æ¯”å¤§å°ï¼Œp1 - p2 = ä¸¤ä¸ªè¿­ä»£å™¨é—´çš„å…ƒç´ ä¸ªæ•°ï¼›æ”¯æŒ sortï¼ˆlist ä¸èƒ½ä½¿ç”¨ stl çš„ sortï¼Œä½†æ˜¯æœ‰è‡ªå·±çš„ sortï¼‰ã€‚

  eg. vector, deque

- ä¸æ”¯æŒè¿­ä»£å™¨

  eg. stack, queue 

### ç®—æ³•

```c++
if(find(v.begin(), v.end(), val) == v.end()) cout << "Not Found." << endl;
//stlå¸¸å¸¸ç”¨ a < b == false && b < a == false æ¥åˆ¤æ–­aæ˜¯å¦å’Œbç›¸ç­‰ã€‚
```

```c++
list.size() //æ˜¯ O(n) çš„
```

### å‡½æ•°å¯¹è±¡

å¦‚æœä¸€ä¸ªç±»é‡è½½äº†åœ†æ‹¬å·è¿ç®—ç¬¦ï¼Œåˆ™è¿™ä¸ªç±»çš„å¯¹è±¡éƒ½å«åšå‡½æ•°å¯¹è±¡ã€‚

å¯ä»¥é€šè¿‡ ç±»å+() ç”Ÿæˆä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œå³å¯ä½œä¸ºå‡½æ•°ä½¿ç”¨ã€‚



---

## Lecture 14. STLåº“ 2

### å…³è”å®¹å™¨

set, multiset, map, multimap å†…éƒ¨éƒ½æ˜¯æœ‰åºæ’åˆ—ï¼ŒæŸ¥æ‰¾ä¸º O(logn)ã€‚

```c++
template<class Key, class Pred = less<Key>, class A= allocator<Key>>
class multiset{};  // â†‘ é»˜è®¤ä»å°åˆ°å¤§ (éœ€è¦æ”¯æŒå°äºå·!)
```

```c++
iterator find (const T & val);
// åœ¨å®¹å™¨ä¸­æŸ¥æ‰¾å€¼ä¸º val çš„å…ƒç´ ï¼Œè¿”å›å…¶è¿­ä»£å™¨ã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å› end ()ã€‚
iterator insert (const T & val); //å°† val æ’å…¥åˆ°å®¹å™¨ä¸­å¹¶è¿”å›å…¶è¿­ä»£å™¨ã€‚
void insert ( iterator first,iterator last); //å°†åŒºé—´ [first,last) æ’å…¥å®¹å™¨ã€‚
int count (const T & val); //ç»Ÿè®¡æœ‰å¤šå°‘ä¸ªå…ƒç´ çš„å€¼å’Œ val ç›¸ç­‰ã€‚
iterator lower_bound (const T & val);
//æŸ¥æ‰¾ä¸€ä¸ªæœ€å¤§çš„ä½ç½® it, ä½¿å¾— [begin (),it) ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½æ¯” val å°ã€‚
iterator upper_bound (const T & val);
//æŸ¥æ‰¾ä¸€ä¸ªæœ€å°çš„ä½ç½® it, ä½¿å¾— [it,end ()) ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½æ¯” val å¤§ã€‚
```

```c++
int a[5] = {2, 4, 6, 3, 1};
set<int> st(a, a+5);
result = st.insert (5); //st å˜æˆ 1 2 3 4 5 6
if ( result.second ) // æ’å…¥æˆåŠŸåˆ™è¾“å‡ºè¢«æ’å…¥å…ƒç´ 
	cout << * result.first << "inserted" << endl; // è¾“å‡º: 5 inserted
else
	cout << * result.first << "already exists" << endl; // è¾“å‡º 5 already exists
```



### ç®—æ³•

```c++
//for_each
template<class InIt, class Fun>
Fun for_each(InIt first, InIt last, Fun f);

//transform
template<class InIt, class OutIt, class Unop> 
OutIt transform(InIt first, InIt last, OutIt x, Unop uop); 
//å¯¹[first,last)ä¸­çš„æ¯ä¸ªè¿­ä»£å™¨ I ,
//æ‰§è¡Œ uop( * I ) ; å¹¶å°†ç»“æœä¾æ¬¡æ”¾å…¥ä» x å¼€å§‹çš„åœ°æ–¹ã€‚
//è¦æ±‚ uop( * I ) ä¸å¾—æ”¹å˜ * I çš„å€¼ã€‚

//copy
copy(source.begin(), source.end(), destination.begin());

//unique
template<class FwdIt> 
FwdIt  unique(FwdIt first, FwdIt last); //ç”¨ == æ¯”è¾ƒæ˜¯å¦ç­‰
template<class FwdIt, class Pred> 
FwdIt  unique(FwdIt first, FwdIt last, Pred pr); //ç”¨ pr æ¯”è¾ƒæ˜¯å¦ç­‰
//å¯¹[first,last) è¿™ä¸ªåºåˆ—ä¸­è¿ç»­ç›¸ç­‰çš„å…ƒç´ ï¼Œåªç•™ä¸‹ç¬¬ä¸€ä¸ªã€‚
//è¿”å›å€¼æ˜¯è¿­ä»£å™¨ï¼ŒæŒ‡å‘å…ƒç´ åˆ é™¤åçš„åŒºé—´çš„æœ€åä¸€ä¸ªå…ƒç´ çš„åé¢ã€‚

//random_shuffle
template<class RanIt> 
void random_shuffle(RanIt first, RanIt last); 
//éšæœºæ‰“ä¹±[first,last) ä¸­çš„å…ƒç´ ï¼Œé€‚ç”¨äºèƒ½éšæœºè®¿é—®çš„å®¹å™¨ã€‚
//ç”¨ä¹‹å‰è¦åˆå§‹åŒ–ä¼ªéšæœºæ•°ç§å­:   srand(unsigned(time(NULL)));     //#include <ctime>

//reverse
template<class BidIt> 
void reverse(BidIt first, BidIt last);
//é¢ å€’åŒºé—´[first,last)é¡ºåº

//next_permutation (ä¹Ÿæœ‰prev_permutation)
string str = "231";
char szStr[] = "324";
while (next_permutation(str.begin(), str.end())){
    cout << str << endl;
} //312 321
cout << "****" << endl;
while (next_permutation(szStr,szStr + 3)) {
    cout << szStr << endl;
} //342 423 432

//sort
template< class RandomIt, class Compare >
void sort( RandomIt first, RandomIt last, Compare comp );
std::stable_sort(people.begin(), people.end(), 
                     [](const Person& a, const Person& b) {
                         return a.age < b.age;
                     });
std::vector<int> v = {5, 4, 3, 2, 1};
// åªæ’åºå‰3ä¸ªæœ€å°çš„å…ƒç´ 
std::partial_sort(v.begin(), v.begin() + 3, v.end());
// v å¯èƒ½å˜ä¸º {1, 2, 3, 5, 4}ï¼ˆå‰3ä¸ªæœ€å°ï¼Œå…¶ä½™æ— åºï¼‰

//heap
template< class RandomIt >
void make_heap( RandomIt first, RandomIt last );
template< class RandomIt, class Compare >
void make_heap( RandomIt first, RandomIt last, Compare comp );

template< class RandomIt >
void push_heap( RandomIt first, RandomIt last ); //å…¶ä¸­ [first, last-1) å·²ç»æ˜¯å †ï¼Œ*(last-1) æ˜¯è¦æ’å…¥å †çš„å…ƒç´ ã€‚
template< class RandomIt, class Compare >
void push_heap( RandomIt first, RandomIt last, Compare comp );
std::vector<int> v = {9, 5, 4, 1, 1, 3};  // å·²ç»æ˜¯æœ€å¤§å †
v.push_back(6);  // æ·»åŠ å…ƒç´ åˆ°æœ«å°¾
std::push_heap(v.begin(), v.end());  // å°† 6 æ’å…¥å †
// æ­¤æ—¶ v çš„é¡ºåºå¯èƒ½æ˜¯ {9, 5, 6, 1, 1, 3, 4}
std::pop_heap(v.begin(), v.end());  // å°†å †é¡¶ 9 ç§»åˆ°æœ«å°¾
// æ­¤æ—¶ v çš„é¡ºåºå¯èƒ½æ˜¯ {6, 5, 4, 1, 1, 3, 9}
v.pop_back();  // ç§»é™¤æœ«å°¾çš„ 9
// å‰©ä½™å…ƒç´  {6, 5, 4, 1, 1, 3} ä»æ˜¯æœ€å¤§å †
std::sort_heap(v.begin(), v.end());  // å †æ’åº
// æ­¤æ—¶ v å˜ä¸º {1, 1, 3, 4, 5, 6, 9}ï¼ˆå‡åºï¼‰

//binary_search
std::vector<int> v = {1, 3, 5, 7, 9};  //éœ€è¦æ’åº
bool found = std::binary_search(v.begin(), v.end(), 5);  // true
bool not_found = std::binary_search(v.begin(), v.end(), 4);  // false

//equal_range
template<class FwdIt, class T> 
pair<FwdIt, FwdIt> equal_range(FwdIt first, FwdIt last, const T& val); 
//è¦æ±‚[first,last)æ˜¯æœ‰åºçš„ï¼Œ
//è¿”å›å€¼æ˜¯ä¸€ä¸ªpair, p.firstå°±æ˜¯lower_boundçš„ç»“æœ, p.last å°±æ˜¯ upper_boundçš„ç»“æœ

```





---

## Lecture 15. C++ç‰¹æ€§

ç»Ÿä¸€çš„åˆå§‹åŒ–æ–¹æ³•ï¼šéƒ½å¯ä»¥ç›´æ¥èŠ±æ‹¬å·

```c++
int arr[3] {1, 2, 3};
vector<int> iv {1, 2, 3};
map<int, string> mp { {1, "a"}, {2, "b"} };
string str{"Hello World"};
int* p = new int[3]{1, 2, 3};
A* pa = new A{3, 7};
A a[] = {{1,2}, {3,4}, {5,6}}; //åœ†æ‹¬å·ä¸è¡Œ
```

decltypeï¼šæ±‚è¡¨è¾¾å¼çš„ç±»å‹

```c++
A a;
decltype(a) x;
decltype((a)) x; //xç±»å‹ä¸º A&
```

æ™ºèƒ½æŒ‡é’ˆ shared_ptr

```c++
struct A {
    int n;
    A(int v = 0):n(v) {}
    ~A() { cout << n << " destructor" << endl; }
};

int main() {
    shared_ptr<A> sp1(new A(2)); // sp1æ‰˜ç®¡ A(2)
    shared_ptr<A> sp2(sp1); // sp2ä¹Ÿæ‰˜ç®¡ A(2)
    cout << "1) " << sp1->n << "," << sp2->n << endl; // è¾“å‡º 1) 2, 2
    
    shared_ptr<A> sp3;
    A* p = sp1.get(); // pæŒ‡å‘ A(2)
    cout << "2) " << p->n << endl;

    sp3 = sp1;  // sp3ä¹Ÿæ‰˜ç®¡ A(2)
    cout << "3) " << (*sp3).n << endl;  // è¾“å‡º 2
    
    sp1.reset();  // sp1æ”¾å¼ƒæ‰˜ç®¡ A(2)
    if(!sp1)
        cout << "4) sp1 is null" << endl;  // ä¼šè¾“å‡º
        
    A* q = new A(3);
    sp1.reset(q);  // sp1æ‰˜ç®¡ q
    cout << "5) " << sp1->n << endl;  // è¾“å‡º 3
    
    shared_ptr<A> sp4(sp1);  // sp4æ‰˜ç®¡ A(3)
    shared_ptr<A> sp5;
    // sp5.reset(q); ä¸å¦¥,ä¼šå¯¼è‡´ç¨‹åºå‡ºé”™ï¼Œå› ä¸ºå½¼æ­¤ä¸çŸ¥é“éƒ½ç®¡äº†qï¼Œå°±ä¼šåˆ ä¸¤æ¬¡ã€‚æ‰€ä»¥åˆå§‹åŒ–å¿…é¡»sp5(sp1).
    
    sp1.reset();  // sp1æ”¾å¼ƒæ‰˜ç®¡ A(3)
    cout << "before end main" << endl;
    sp4.reset();  // sp4æ”¾å¼ƒæ‰˜ç®¡ A(3)
    cout << "end main" << endl;
    return 0;  // ç¨‹åºç»“æŸ,ä¼šdeleteæ‰ A(2)
}
/*
è¾“å‡ºç»“æœï¼š
1) 2,2
2) 2
3) 2
4) sp1 is null
5) 3
before end main
3 destructor
end main
2 destructor
*/
```

ç§»åŠ¨æ„é€ å‡½æ•°

```c++
class String {
public:
    char* str;
    String() : str(new char[1]) { str[0] = 0; }
    String(const char* s) {
        str = new char[strlen(s)+1];
        strcpy(str, s);
    }
    //æ­£å¸¸æ·±æ‹·è´
    String(const String& s) {
        cout << "copy constructor called" << endl;
        str = new char[strlen(s.str)+1];
        strcpy(str, s.str);
    }
    
    // ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦
    String& operator=(String&& s) {
        cout << "move operator= called" << endl;
        if (str != s.str) {
            delete[] str;
            str = s.str;
            s.str = new char[1];
            s.str[0] = 0;
        }
        return *this;
    }
    
    ~String() { delete[] str; }
};

template <class T>
void MoveSwap(T& a, T& b) {
    T tmp(move(a));  // std::move(a)è½¬æ¢ä¸ºå³å€¼ï¼Œè°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°
    a = move(b);     // move(b)è½¬æ¢ä¸ºå³å€¼ï¼Œè°ƒç”¨ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦
    b = move(tmp);   // move(tmp)è½¬æ¢ä¸ºå³å€¼ï¼Œè°ƒç”¨ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦
}
```

<img src="./../typora-images\image-20250430112057946.png" alt="image-20250430112057946" style="zoom:25%;" />

å“ˆå¸Œè¡¨ï¼ˆæ— åºå®¹å™¨ï¼‰ï¼ˆpython çš„ dictï¼‰ï¼ˆæ“ä½œä¸º O(1)ï¼Œä½†æ²¡æœ‰è¿­ä»£å™¨ï¼‰

```c++
unordered_map<string, int> turingWinner;
// æ’å…¥æ•°æ®
turingWinner.insert(make_pair("Dijkstra", 1972));
turingWinner.insert(make_pair("Scott", 1976));
turingWinner.insert(make_pair("Wilkes", 1967));
turingWinner.insert(make_pair("Hamming", 1968));
turingWinner["Ritchie"] = 1983;  // ä½¿ç”¨ä¸‹æ ‡æ“ä½œç¬¦æ’å…¥
```

æ­£åˆ™è¡¨è¾¾å¼ï¼š

- . åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦
- ? éœ€ç»„åˆä½¿ç”¨ï¼ŒåŒ¹é…0æˆ–1ä¸ªå­—ç¬¦
- +éœ€ç»„åˆä½¿ç”¨ï¼ŒåŒ¹é…1æˆ–å¤šä¸ªå­—ç¬¦
- *éœ€ç»„åˆä½¿ç”¨ï¼ŒåŒ¹é…0æˆ–1æˆ–å¤šä¸ªå­—ç¬¦
- {n} éœ€ç»„åˆä½¿ç”¨ï¼ŒåŒ¹é…næ¬¡
- [a-zA-Z] åŒ¹é…ä¸€ä¸ªå­—æ¯å­—ç¬¦
- \d åŒ¹é…ä¸€ä¸ªæ•°å­—
- \s åŒ¹é…ä¸€ä¸ªç©ºç™½å­—ç¬¦
- () æ•è·åˆ†ç»„åŒ¹é…çš„å†…å®¹
- \1 å¼•ç”¨ç¬¬ä¸€ä¸ªæ•è·ç»„

```c++
#include <regex>
int main() {
    // ç®€å•æ¨¡å¼åŒ¹é…
    regex reg("b.?p.*k");
    cout << regex_match("boopgk", reg) << endl;    // è¾“å‡º 1, åŒ¹é…æˆåŠŸ
    cout << regex_match("booppggk", reg) << endl;  // è¾“å‡º 0, åŒ¹é…å¤±è´¥
    cout << regex_match("b pk", reg) << endl;      // è¾“å‡º 1, åŒ¹é…æˆåŠŸ

    // å¤æ‚æ¨¡å¼åŒ¹é…
    regex reg2("\\d{3}([a-zA-Z]+).(\\d{2}|N/A)\\s\\n");
    string correct = "123Hello N/A\n";
    string incorrect = "123Hello 12\n";
    cout << regex_match(correct, reg2) << endl;    // è¾“å‡º 1, åŒ¹é…æˆåŠŸ
    cout << regex_match(incorrect, reg2) << endl;  // è¾“å‡º 0, åŒ¹é…å¤±è´¥

    return 0;
}
```

lambda è¡¨è¾¾å¼ï¼š

- [ ] ä¸ä½¿ç”¨ä»»ä½•å¤–éƒ¨å˜é‡
- [=] ä»¥ä¼ å€¼çš„å½¢å¼ä½¿ç”¨æ‰€æœ‰å¤–éƒ¨å˜é‡
- [&] ä»¥å¼•ç”¨å½¢å¼ä½¿ç”¨æ‰€æœ‰å¤–éƒ¨å˜é‡
- [x, &y] x ä»¥ä¼ å€¼å½¢å¼ä½¿ç”¨ï¼Œy ä»¥å¼•ç”¨å½¢å¼ä½¿ç”¨
- [=, &x, &y] x, y ä»¥å¼•ç”¨å½¢å¼ä½¿ç”¨ï¼Œå…¶ä½™å˜é‡ä»¥ä¼ å€¼å½¢å¼ä½¿ç”¨
- [&, x, y] x, y ä»¥ä¼ å€¼çš„å½¢å¼ä½¿ç”¨ï¼Œå…¶ä½™å˜é‡ä»¥å¼•ç”¨å½¢å¼ä½¿ç”¨

```c++
 int x = 100, y = 200, z = 300;
    
// ç«‹å³è°ƒç”¨çš„åŒ¿åLambdaè¡¨è¾¾å¼
cout << [](double a, double b) { return a + b; }(1.2, 2.5) << endl;

// å¸¦æ•è·åˆ—è¡¨çš„Lambdaè¡¨è¾¾å¼
auto ff = [=, &y, &z](int n) {
    cout << x << endl;  // å€¼æ•è·çš„x
    y++;                // å¼•ç”¨æ•è·çš„y
    z++;                // å¼•ç”¨æ•è·çš„z 
    return n * n;
};

cout << ff(15) << endl;  // è°ƒç”¨Lambda
cout << y << "," << z << endl;
```

```c++
#include <functional>
function<int(int)> fib = [&fib](int n)
{ return n <= 2 ? 1 : fib(n-1) + fib(n-2); };

cout << fib(5) << endl; //è¾“å‡º5

// function<int(int)> è¡¨ç¤ºè¿”å›å€¼ä¸º int, æœ‰ä¸€ä¸ªintå‚æ•°çš„å‡½æ•°
```

å¤šçº¿ç¨‹ï¼ˆæœ‰å¤šæ ¸CPUåˆ™èƒ½è·‘ï¼‰



### é«˜çº§ç‰¹æ€§

å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼ˆç›®çš„æ˜¯æ ‡æ³¨è‡ªå·±çš„å±é™©è¡Œä¸ºï¼Œæ–¹ä¾¿ç­›æŸ¥bugï¼‰

1. static_cast: è‡ªç„¶ï¼Œä½é£é™©

2. reinterpret_cast: ä¸åŒç±»å‹æŒ‡é’ˆä¹‹é—´è½¬æ¢ï¼ˆé€ä¸ªæ¯”ç‰¹æ‹·è´ï¼‰

3. const_cast: const è½¬æ¢æˆé const

4. dynamic_cast: ç”¨äºå¤šæ€åŸºç±»çš„æŒ‡é’ˆçš„è½¬æ¢ï¼Œèƒ½å¤Ÿæ£€æŸ¥è½¬æ¢çš„å®‰å…¨æ€§ã€‚ï¼ˆéå¤šæ€çš„ä¸è¡Œï¼‰

   ```c++
   ```

   

å¼‚å¸¸å¤„ç†ï¼ˆtryã€throwã€catchï¼‰

```c++
double m, n;
cin >> m >> n;
try {
    cout << "before dividing." << endl;
    if(n == 0)
        throw -1; //æŠ›å‡ºæ•´å‹å¼‚å¸¸
    else if(m == 0)
        throw -1.0; //æŠ›å‡ºdoubleå‹å¼‚å¸¸
    else
        cout << m / n << endl;
    cout << "after dividing." << endl;
}
catch(double d) {
    cout << "catch(double) " << d << endl;
}
catch(...) { //åŒ¹é…ä»»ä½•ç±»å‹çš„å¼‚å¸¸
    cout << "catch(...)" << endl;
}
cout << "finished" << endl;
return 0;
```

<img src="./../typora-images\image-20250430115431245.png" alt="image-20250430115431245" style="zoom:25%;" />

æ ‡å‡†å¼‚å¸¸ç±»ï¼š



---

## Lecture 16. çˆ¬è™«

åç¨‹

```python
import asyncio
async def f() #åŠ äº†asyncå³ä¸ºåç¨‹
await f() #åç¨‹çš„å‡½æ•°å¿…é¡»åŠ await
```

request åªèƒ½æ‹¿åˆ° JavaScript æ¸²æŸ“å‰çš„ç½‘é¡µï¼Œselenium å’Œ pyppeteer å¯ä»¥è·å¾—æ¸²æŸ“åçš„ç½‘é¡µã€‚



### HTML

- `<div> </div>` name åŒ…è£¹ä¸€ä¸ª tag, name å¯ä»¥ç›¸åŒ
- `a`ä¸€èˆ¬æ˜¯é“¾æ¥

```html
<X attr1='xxx' attr2='yyy' attr3='zzz' â€¦>
	nnnnnnnnnnnnnn
    <a href="www.sohu.com" id='mylink'>æœç‹ç½‘</a>
</X>
```



### BeautifulSoup

```python
diva = soup.find("div", attrs={"id":"synoid"}) #atträ»¥å­—å…¸æ–¹å¼å­˜å‚¨
#å¯»æ‰¾åä¸º"div"ï¼Œä¸”å…·æœ‰å€¼ä¸º"synoid"çš„å±æ€§"id"çš„tag
if diva != None:  #å¦‚æœæ‰¾åˆ°
    for x in diva.find_all("span",attrs={"class":"p1-4"}):
        print(x.text)  #åœ¨divaå†…éƒ¨ç»§ç»­æ‰¾
```



---

## Lecture 17. æ•°æ®åˆ†æ

### pandas

#### 1. Series

#### 2. DataFrame

æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªseriesã€‚



### matplotlib





---

## Lecture 18. Flask

### ä¸€ã€ç®€å•çš„ Flask ç¨‹åº

```python
@app.route('/user/<username>')
app = Flask(__name__)
def show_user(username):
    return 'User %s' % username
@app.route('/post/<float:gpa>')
def show_gpa(gpa):
    return 'Post %f' % gpa
@app.route('/post/<path:mypath>')
def show_path(mypath):
    return 'Post %s' % mypath

if __name__ == '__main__':
    app.run()
```

<img src="./../typora-images\image-20250530160042815.png" alt="image-20250530160042815" style="zoom:33%;" />

### äºŒã€é™æ€æ–‡ä»¶

åœ¨main.py æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œå»ºç«‹ **static** æ–‡ä»¶å¤¹ï¼ŒæŠŠé™æ€htmlæ–‡æ¡£æ”¾é‡Œé¢ã€‚staticæ–‡ä»¶å¤¹ä¸‹è¿˜å¯ä»¥æœ‰æ–‡ä»¶å¤¹ã€‚

è®¿é—®æ—¶å³å¯ç›´æ¥ http://127.0.0.1:5000/static/ok.htm [http://127.0.0.1:5000/static/tmp/ok2.htm](http://127.0.0.1:5000/static/ok.htm)ï¼ˆæ”¾åœ¨åˆ«çš„æ–‡ä»¶å¤¹åˆ™ä¸è¡Œï¼‰

```py
from flask import Flask
app = Flask(__name__, static_url_path='') #è¿™æ ·è®¾ç½®å³å¯ä¸åœ¨è®¿é—®è·¯å¾„ä¸­æ˜å†™static
if __name__ == '__main__':
    app.run()
```

```python
#é‡å®šå‘åˆ°é™æ€æ–‡ä»¶
from flask import Flask,redirect
app = Flask(__name__, static_url_path='')

@app.route('/login')
def login():
    return redirect("ok.htm")

if __name__ == '__main__':
    app.run()
```



### ä¸‰ã€åå‘è·¯ç”±



### å››ã€æ¨¡æ¿

åŒ…å« flask è„šæœ¬çš„ html æ–‡æ¡£å«åšæ¨¡æ¿ï¼Œå­˜æ”¾åœ¨ templates æ–‡ä»¶å¤¹ã€‚

```html
<html><body>
<title>Hello from Flask</title>
{% if name %} <!-- {% åœ¨è¿™é‡Œé¢çš„å°±æ˜¯flaskè„šæœ¬ %} -->
  <h1>Hello {{ name }}!</h1>  <!-- {{name}}å³ä¸ºflaskè¦æ¸²æŸ“çš„å†…å®¹ -->
{% else %}
  <h1>Hello World!</h1>
{% endif %}
</body></html>
```

```python
from flask import Flask, render_template
app = Flask(__name__, static_url_path='')

@app.route('/hello/')
@app.route('/hello/<name>')
def hello(name=None):
    return render_template('hello.html', name=name)

if __name__ == '__main__':
    app.run()
```

æ¨¡æ¿ç»§æ‰¿

```html
<!-- çˆ¶æ¨¡æ¿: base.html -->
<html>
  <head>
    {% if title %}
    <title>{{title}} - microblog</title>
    {% else %}
    <title>microblog</title>
    {% endif %}
  </head>
  <body>
    <hr>
    {% block AAA %}
      <br>this is block head from base<br>
    {% endblock %}
  </body>
</html>  <!-- {% block AAA %}{% endblock %} éƒ¨åˆ†ä¼šè¢«æ´¾ç”Ÿæ¨¡æ¿çš„åŒåblock(åä¸º AAA) æ›¿æ¢ã€‚ ä¸€ä¸ªæ¨¡æ¿é‡Œå¯ä»¥æœ‰å¤šä¸ª blockï¼Œå¯ä»¥èµ·å¤šä¸ªåå­— -->


<!-- å­æ¨¡æ¿ derived.html: -->
{% extends "base.html" %}  <!-- ç»§æ‰¿base -->
{% block AAA %}   <!-- æ­¤blockåä¸º AAA -->
  {{super()}} <!-- ä½¿ç”¨çˆ¶æ¨¡æ¿çš„block -->
  <h1>This is derived, {{user.nickname}}!</h1>
{% endblock %}
```



### äº”ã€ä½¿ç”¨requestè·å–getè¯·æ±‚çš„å‚æ•°

- get è¯·æ±‚ï¼šåœ¨ url é‡Œä½“ç°
- post è¯·æ±‚ï¼šå¤§é‡çš„æ•°æ®ï¼Œé€šè¿‡äºŒè¿›åˆ¶å½¢å¼ä¼ è¾“è¡¨å•

```python
```



### å…­ã€Session å’Œ Post

- sessionï¼šæœåŠ¡å™¨ç”¨ session è®°å½•å®¢æˆ·ä¿¡æ¯ï¼Œè¯†åˆ«å®¢æˆ·
